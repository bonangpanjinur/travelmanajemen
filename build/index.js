(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var l in t)e.o(t,l)&&!e.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:t[l]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.React;var t=e.n(a);const l=window.ReactDOM;var n=e.n(l),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const s=(e,t)=>{const l=(0,a.forwardRef)(({color:l="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:m="",children:i,...c},d)=>{return(0,a.createElement)("svg",{ref:d,...r,width:n,height:n,stroke:l,strokeWidth:o?24*Number(s)/Number(n):s,className:["lucide",`lucide-${u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,m].join(" "),...c},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(i)?i:[i]]);var u});return l.displayName=`${e}`,l},o=s("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),m=s("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),i=s("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),c=s("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),d=s("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),u=s("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),g=s("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),p=e=>{if(!e)return"";try{const a=new Date(e);return isNaN(a.getTime())?"":a.toISOString().split("T")[0]}catch(e){return""}},h=e=>null==e?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),y=({label:e,type:t="text",name:l,value:n,onChange:r,required:s=!1,...o})=>(0,a.createElement)("div",{className:"mb-4"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:l},e," ",s&&(0,a.createElement)("span",{className:"text-red-500"},"*")),(0,a.createElement)("input",{type:t,id:l,name:l,value:n||"",onChange:r,required:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",...o})),b=({label:e,name:t,value:l,onChange:n,...r})=>(0,a.createElement)("div",{className:"mb-4"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:t},e),(0,a.createElement)("textarea",{id:t,name:t,value:l||"",onChange:n,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",...r})),E=({label:e,name:t,value:l,onChange:n,children:r,required:s=!1,...o})=>(0,a.createElement)("div",{className:"mb-4"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:t},e," ",s&&(0,a.createElement)("span",{className:"text-red-500"},"*")),(0,a.createElement)("select",{id:t,name:t,value:l||"",onChange:n,required:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white",...o},r)),f=({show:e,onClose:t,title:l,children:n,footer:r})=>e?(0,a.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300"},(0,a.createElement)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col transition-transform duration-300 transform scale-95 opacity-0 animate-modal-in"},(0,a.createElement)("div",{className:"flex justify-between items-center p-5 border-b"},(0,a.createElement)("h3",{className:"text-lg font-semibold text-gray-800"},l),(0,a.createElement)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors"},(0,a.createElement)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))),(0,a.createElement)("div",{className:"p-6 overflow-y-auto"},n),(0,a.createElement)("div",{className:"flex justify-end items-center p-5 border-t bg-gray-50 rounded-b-lg"},r))):null,k=({onClick:e,children:t,variant:l="primary",type:n="button",...r})=>(0,a.createElement)("button",{type:n,onClick:e,className:`px-4 py-2 rounded-md font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500"}[l]}`,...r},t),v=()=>(0,a.createElement)("div",{className:"flex justify-center items-center h-64"},(0,a.createElement)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})),x=({message:e,type:t="error"})=>e?(0,a.createElement)("div",{className:`border px-4 py-3 rounded-md my-4 ${{error:"bg-red-100 border-red-400 text-red-700",success:"bg-green-100 border-green-400 text-green-700"}[t]}`,role:"alert"},(0,a.createElement)("span",{className:"block sm:inline"},e)):null,_=({pagination:e,onPageChange:t})=>{const{total_pages:l,current_page:n}=e;return l<=1?null:(0,a.createElement)("div",{className:"flex justify-between items-center mt-4"},(0,a.createElement)(k,{variant:"outline",onClick:()=>t(n-1),disabled:n<=1},(0,a.createElement)(o,{className:"w-4 h-4 mr-2"}),"Sebelumnya"),(0,a.createElement)("span",{className:"text-sm text-gray-600"},"Halaman ",n," dari ",l),(0,a.createElement)(k,{variant:"outline",onClick:()=>t(n+1),disabled:n>=l},"Selanjutnya",(0,a.createElement)(m,{className:"w-4 h-4 ml-2"})))},w=({initialValue:e,onSearch:t})=>{const[l,n]=(0,a.useState)(e),r=(0,a.useRef)(null);return(0,a.useEffect)(()=>(clearTimeout(r.current),r.current=setTimeout(()=>{t(l)},500),()=>clearTimeout(r.current)),[l,t]),(0,a.createElement)("div",{className:"relative mb-4"},(0,a.createElement)("input",{type:"text",placeholder:"Cari data...",value:l,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,a.createElement)(i,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}))},C=window.umh_wp_data||{api_url:"/wp-json/umh/v1/",nonce:"",user:{token:""}},N={getToken:()=>C.user?C.user.token:null,request:async(e,a="GET",t=null)=>{const l={method:a,headers:{"Content-Type":"application/json",Authorization:`Bearer ${N.getToken()}`}};t&&(l.body=JSON.stringify(t));try{const a=await fetch(C.api_url+e,l);if(204===a.status)return{success:!0};const t=await a.json();if(!a.ok)throw new Error(t.message||`Error ${a.status}: ${a.statusText}`);return t}catch(t){throw console.error(`API Error (${a} ${e}):`,t),t}},get:e=>N.request(e,"GET"),post:(e,a)=>N.request(e,"POST",a),put:(e,a)=>N.request(e,"PUT",a),del:e=>N.request(e,"DELETE")},S=(e,t,l)=>{const[n,r]=(0,a.useState)([]),[s,o]=(0,a.useState)({}),[m,i]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,g]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),[E,f]=(0,a.useState)(t),[k,v]=(0,a.useState)(null),[x,_]=(0,a.useState)(1),[w,C]=(0,a.useState)(""),[S,T]=(0,a.useState)({total_items:0,total_pages:1,current_page:1}),P=e=>{v(e),setTimeout(()=>v(null),3e3)},D=(0,a.useCallback)(async()=>{if(l)try{const e=await l();o(e||{})}catch(e){d(`Gagal memuat data pendukung: ${e.message}`)}},[l]),M=(0,a.useCallback)(async()=>{i(!0),d(null);try{await D();const a=new URLSearchParams({page:x,search:w}),t=await N.get(`${e}?${a.toString()}`);if(t&&"object"==typeof t&&Array.isArray(t.data))r(t.data),T({total_items:t.total_items,total_pages:t.total_pages,current_page:t.current_page});else{if(!Array.isArray(t))throw new Error("Format data tidak dikenal");r(t),T({total_items:t.length,total_pages:1,current_page:1})}}catch(a){d(`Gagal memuat data ${e}: ${a.message}`)}finally{i(!1)}},[e,D,x,w]);(0,a.useEffect)(()=>{M()},[M]);const j=()=>{g(!1),d(null)};return{list:n,dependencies:s,isLoading:m,error:c,successMessage:k,isModalOpen:u,isEditing:p,currentItem:y,formState:E,pagination:S,searchTerm:w,setPage:_,setSearchTerm:e=>{C(e),_(1)},handleChange:e=>{const{name:a,value:t,type:l,checked:n}=e.target;f(e=>({...e,[a]:"checkbox"===l?n:t}))},handleAddNew:()=>{h(!1),b(null),f(t),g(!0)},handleEdit:e=>{h(!0),b(e),f(e),g(!0)},handleCloseModal:j,handleSubmit:async a=>{a.preventDefault(),d(null);try{let a;p?(a=await N.put(`${e}/${y.id}`,E),P("Data berhasil diperbarui.")):(a=await N.post(e,E),P("Data berhasil ditambahkan.")),1!==x?_(1):M(),j()}catch(e){d(`Gagal menyimpan: ${e.message}`)}},handleDelete:async a=>{if(window.confirm("Apakah Anda yakin ingin menghapus data ini?")){d(null);try{await N.del(`${e}/${a}`),P("Data berhasil dihapus."),1!==x?_(1):M()}catch(e){d(`Gagal menghapus: ${e.message}`)}}},fetchData:M,setError:d,setFormState:f,fetchDependencies:D}},T=({columns:e,data:t,onEdit:l,onDelete:n})=>(0,a.createElement)("div",{className:"overflow-x-auto shadow-md rounded-lg"},(0,a.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,a.createElement)("thead",{className:"bg-gray-100"},(0,a.createElement)("tr",null,e.map(e=>(0,a.createElement)("th",{key:e.key,className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},e.label)),(0,a.createElement)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Aksi"))),(0,a.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===t.length?(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:e.length+1,className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data.")):t.map(t=>(0,a.createElement)("tr",{key:t.id,className:"hover:bg-gray-50"},e.map(e=>(0,a.createElement)("td",{key:e.key,className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800"},e.render?e.render(t):t[e.key])),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},(0,a.createElement)("button",{onClick:()=>l(t),className:"text-blue-600 hover:text-blue-800 mr-3"},"Edit"),(0,a.createElement)("button",{onClick:()=>n(t.id),className:"text-red-600 hover:text-red-800"},"Hapus"))))))),P=({title:e,value:l,icon:n,colorClass:r})=>(0,a.createElement)("div",{className:`bg-white p-6 rounded-lg shadow-lg border-l-4 ${r.replace("text","border")} flex items-center space-x-4 transition-all hover:shadow-xl`},(0,a.createElement)("div",{className:`p-3 rounded-full ${r} ${r.replace("text","bg")}/10`},t().cloneElement(n,{className:`w-6 h-6 ${r}`})),(0,a.createElement)("div",null,(0,a.createElement)("h3",{className:"text-sm font-medium text-gray-500 uppercase"},e),(0,a.createElement)("p",{className:"mt-1 text-3xl font-semibold text-gray-900"},l))),D=()=>{const[e,t]=(0,a.useState)(null),[l,n]=(0,a.useState)(!0),[r,s]=(0,a.useState)(null);if((0,a.useEffect)(()=>{(async()=>{try{n(!0);const e=await N.get("stats/totals");t(e)}catch(e){s(e.message)}finally{n(!1)}})()},[]),l)return(0,a.createElement)(v,null);if(r)return(0,a.createElement)(x,{message:`Gagal memuat statistik: ${r}`});const{total_jamaah:o,total_packages:m,total_revenue:i}=e||{},p=e?.total_jamaah_lunas||0;return(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},(0,a.createElement)(P,{title:"Total Jemaah",value:o||0,icon:(0,a.createElement)(c,null),colorClass:"text-blue-600"}),(0,a.createElement)(P,{title:"Total Paket",value:m||0,icon:(0,a.createElement)(d,null),colorClass:"text-indigo-600"}),(0,a.createElement)(P,{title:"Total Pemasukan",value:h(i||0),icon:(0,a.createElement)(u,null),colorClass:"text-green-600"}),(0,a.createElement)(P,{title:"Jemaah Lunas",value:p,icon:(0,a.createElement)(g,null),colorClass:"text-teal-600"}))},M=()=>{const e=(0,a.useCallback)(async()=>{const[e,a,t]=await Promise.all([N.get("categories?page=1&search="),N.get("flights?page=1&search="),N.get("hotels?page=1&search=")]);return{categories:e.data||e,flights:a.data||a,hotels:t.data||t}},[]),{list:t,dependencies:l,isLoading:n,error:r,successMessage:s,isModalOpen:o,isEditing:m,formState:i,setFormState:c,pagination:d,searchTerm:u,setPage:g,setSearchTerm:C,handleChange:P,handleAddNew:D,handleCloseModal:M,handleSubmit:j,handleDelete:A,fetchData:q}=S("packages",{name:"",category_id:"",description:"",departure_date:"",duration_days:0,status:"draft",prices:[{room_type:"Quad",price:0}],flight_ids:[],hotel_bookings:[]},e),B=(e,a,t)=>{const l=[...i.prices];l[e][a]=t,c(e=>({...e,prices:l}))},$=(e,a,t)=>{const l=[...i.hotel_bookings];l[e][a]=t,c(e=>({...e,hotel_bookings:l}))},L=[{key:"name",label:"Nama Paket"},{key:"category",label:"Kategori",render:e=>l.categories?.find(a=>a.id==e.category_id)?.name||"N/A"},{key:"price",label:"Harga",render:e=>{if(!e.prices||0===e.prices.length)return"Rp 0";const a=Math.min(...e.prices.map(e=>e.price));return`Mulai dari ${h(a)}`}},{key:"departure_date",label:"Keberangkatan",render:e=>p(e.departure_date)},{key:"duration_days",label:"Durasi (Hari)"},{key:"status",label:"Status"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Paket"),(0,a.createElement)(k,{onClick:D},"Tambah Paket Baru")),(0,a.createElement)(x,{message:r,type:"error"}),(0,a.createElement)(x,{message:s,type:"success"}),(0,a.createElement)(w,{initialValue:u,onSearch:C}),n?(0,a.createElement)(v,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{columns:L,data:t,onEdit:e=>{setIsEditing(!0),setCurrentItem(e),c({...e,prices:e.prices||[],flight_ids:e.flight_ids||[],hotel_bookings:e.hotel_bookings||[]}),setModalOpen(!0)},onDelete:A}),(0,a.createElement)(_,{pagination:d,onPageChange:g})),(0,a.createElement)(f,{show:o,onClose:M,title:m?"Edit Paket":"Tambah Paket Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:M,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(k,{onClick:j,type:"submit",form:"package-form"},"Simpan"))},(0,a.createElement)("form",{id:"package-form",onSubmit:j},(0,a.createElement)(y,{label:"Nama Paket",name:"name",value:i.name,onChange:P,required:!0}),(0,a.createElement)(E,{label:"Kategori",name:"category_id",value:i.category_id,onChange:P,required:!0},(0,a.createElement)("option",{value:""},"Pilih Kategori"),l.categories?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.name))),(0,a.createElement)(b,{label:"Deskripsi",name:"description",value:i.description,onChange:P}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Tanggal Keberangkatan",name:"departure_date",type:"date",value:p(i.departure_date),onChange:P,required:!0}),(0,a.createElement)(y,{label:"Durasi (hari)",name:"duration_days",type:"number",value:i.duration_days,onChange:P,required:!0})),(0,a.createElement)(E,{label:"Status",name:"status",value:i.status,onChange:P,required:!0},(0,a.createElement)("option",{value:"draft"},"Draft"),(0,a.createElement)("option",{value:"published"},"Published"),(0,a.createElement)("option",{value:"archived"},"Archived")),(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700 mb-3"},"Harga Dinamis"),i.prices.map((e,t)=>(0,a.createElement)("div",{key:t,className:"flex items-center gap-2 mb-2"},(0,a.createElement)("input",{type:"text",placeholder:"Tipe Kamar (e.g., Quad)",value:e.room_type,onChange:e=>B(t,"room_type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),(0,a.createElement)("input",{type:"number",placeholder:"Harga",value:e.price,onChange:e=>B(t,"price",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),(0,a.createElement)(k,{type:"button",variant:"danger",onClick:()=>(e=>{const a=i.prices.filter((a,t)=>t!==e);c(e=>({...e,prices:a}))})(t)},"X"))),(0,a.createElement)(k,{type:"button",variant:"outline",onClick:()=>{c(e=>({...e,prices:[...e.prices,{room_type:"",price:0}]}))}},"+ Tambah Harga")),(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700 mb-1"},"Link Pesawat"),(0,a.createElement)("p",{className:"text-sm text-gray-500 mb-3"},"Tahan Ctrl/Cmd untuk memilih lebih dari satu."),(0,a.createElement)("select",{multiple:!0,name:"flight_ids",value:i.flight_ids,onChange:e=>{const a=Array.from(e.target.selectedOptions,e=>parseInt(e.value));c(e=>({...e,flight_ids:a}))},className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm"},l.flights?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.airline," (",e.flight_number,") - ",e.departure_airport_code," ke ",e.arrival_airport_code)))),(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700 mb-3"},"Link Hotel"),i.hotel_bookings.map((e,t)=>(0,a.createElement)("div",{key:t,className:"grid grid-cols-3 gap-2 mb-2 p-2 border rounded"},(0,a.createElement)("select",{value:e.hotel_id,onChange:e=>$(t,"hotel_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"},(0,a.createElement)("option",{value:""},"Pilih Hotel"),l.hotels?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.name," (",e.city,")"))),(0,a.createElement)("input",{type:"date",placeholder:"Check-in",value:p(e.check_in_date),onChange:e=>$(t,"check_in_date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),(0,a.createElement)("div",{className:"flex"},(0,a.createElement)("input",{type:"date",placeholder:"Check-out",value:p(e.check_out_date),onChange:e=>$(t,"check_out_date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),(0,a.createElement)(k,{type:"button",variant:"danger",onClick:()=>(e=>{const a=i.hotel_bookings.filter((a,t)=>t!==e);c(e=>({...e,hotel_bookings:a}))})(t),className:"ml-2"},"X")))),(0,a.createElement)(k,{type:"button",variant:"outline",onClick:()=>{c(e=>({...e,hotel_bookings:[...e.hotel_bookings,{hotel_id:"",check_in_date:"",check_out_date:""}]}))}},"+ Tambah Hotel")))))},j=()=>{const e=(0,a.useCallback)(async()=>{const e=await N.get("packages?page=1&search=");return{packages:e.data||e}},[]),{list:t,dependencies:l,isLoading:n,error:r,successMessage:s,isModalOpen:o,isEditing:m,currentItem:i,formState:c,pagination:d,searchTerm:u,setPage:g,setSearchTerm:P,handleChange:D,handleAddNew:M,handleCloseModal:j,handleSubmit:q,handleDelete:B,fetchData:$,setError:L,setFormState:K}=S("jamaah",{full_name:"",package_id:"",birth_date:"",gender:"Laki-laki",address:"",phone:"",email:"",passport_number:"",passport_expiry:"",ktp_number:"",room_type:"Quad",total_price:0,status:"pending",notes:""},e),[F,H]=(0,a.useState)(null),[R,O]=(0,a.useState)(null),[J,I]=(0,a.useState)([]),[V,U]=(0,a.useState)(!1),[G,W]=(0,a.useState)(null),[z,Q]=(0,a.useState)(!1),[X,Z]=(0,a.useState)(null),Y=async(e,a,t)=>{if(!e)return;const l=new FormData;l.append("file",e),l.append("jamaah_id",t),l.append("upload_type",a);try{const e=N.getToken(),t=await fetch(`${C.api_url}uploads`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:l});if(!t.ok){const e=await t.json();throw new Error(e.message||"Upload gagal")}const n=await t.json();K(e=>({...e,[a]:n.file_url})),$(),"ktp_scan"===a&&H(null),"passport_scan"===a&&O(null)}catch(e){L(`Upload ${a} gagal: ${e.message}`)}},ee=async e=>{if(e){Q(!0),Z(null);try{const a=await N.get(`payments?jamaah_id=${e}`);I(a)}catch(e){Z(`Gagal memuat pembayaran: ${e.message}`)}finally{Q(!1)}}},ae=()=>{j(),I([]),Z(null),H(null),O(null)},te=(e=null)=>{W(e),U(!0)},le=()=>{W(null),U(!1),Z(null)},ne=[{key:"full_name",label:"Nama Jemaah"},{key:"package",label:"Paket",render:e=>l.packages?.find(a=>a.id==e.package_id)?.name||"N/A"},{key:"phone",label:"Telepon"},{key:"email",label:"Email"},{key:"payment_status",label:"Status Bayar",render:e=>{const t=e.payment_status||"Belum Lunas";return(0,a.createElement)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{Lunas:"bg-green-100 text-green-800",Cicil:"bg-yellow-100 text-yellow-800","Belum Lunas":"bg-red-100 text-red-800"}[t]}`},t)}},{key:"amount_paid",label:"Total Bayar",render:e=>h(e.amount_paid)},{key:"status",label:"Status Jemaah"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Jemaah (Manifest)"),(0,a.createElement)(k,{onClick:M},"Tambah Jemaah Baru")),(0,a.createElement)(x,{message:r,type:"error"}),(0,a.createElement)(x,{message:s,type:"success"}),(0,a.createElement)(w,{initialValue:u,onSearch:P}),n?(0,a.createElement)(v,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{columns:ne,data:t,onEdit:e=>{setIsEditing(!0),setCurrentItem(e),K(e),setModalOpen(!0),ee(e.id)},onDelete:B}),(0,a.createElement)(_,{pagination:d,onPageChange:g})),(0,a.createElement)(f,{show:o,onClose:ae,title:m?"Edit Jemaah":"Tambah Jemaah Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:ae,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(k,{onClick:q,type:"submit",form:"jamaah-form"},"Simpan Jemaah"))},(0,a.createElement)(x,{message:r,type:"error"}),(0,a.createElement)("form",{id:"jamaah-form",onSubmit:q,className:"space-y-4"},(0,a.createElement)(y,{label:"Nama Lengkap",name:"full_name",value:c.full_name,onChange:D,required:!0}),(0,a.createElement)(E,{label:"Paket",name:"package_id",value:c.package_id,onChange:D,required:!0},(0,a.createElement)("option",{value:""},"Pilih Paket"),l.packages?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.name," ",(e=>{if(!e.prices||0===e.prices.length)return"(Harga belum diatur)";const a=Math.min(...e.prices.map(e=>e.price));return`(Mulai dari ${h(a)})`})(e)))),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Tanggal Lahir",name:"birth_date",type:"date",value:p(c.birth_date),onChange:D}),(0,a.createElement)(E,{label:"Jenis Kelamin",name:"gender",value:c.gender,onChange:D},(0,a.createElement)("option",{value:"Laki-laki"},"Laki-laki"),(0,a.createElement)("option",{value:"Perempuan"},"Perempuan"))),(0,a.createElement)(b,{label:"Alamat",name:"address",value:c.address,onChange:D}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Telepon",name:"phone",value:c.phone,onChange:D,required:!0}),(0,a.createElement)(y,{label:"Email",name:"email",type:"email",value:c.email,onChange:D})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"No. KTP",name:"ktp_number",value:c.ktp_number,onChange:D}),(0,a.createElement)(y,{label:"No. Paspor",name:"passport_number",value:c.passport_number,onChange:D})),(0,a.createElement)(y,{label:"Tgl Kadaluarsa Paspor",name:"passport_expiry",type:"date",value:p(c.passport_expiry),onChange:D}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(E,{label:"Tipe Kamar",name:"room_type",value:c.room_type,onChange:D},(0,a.createElement)("option",{value:"Quad"},"Quad (4)"),(0,a.createElement)("option",{value:"Triple"},"Triple (3)"),(0,a.createElement)("option",{value:"Double"},"Double (2)")),(0,a.createElement)(y,{label:"Total Harga Paket",name:"total_price",type:"number",value:c.total_price,onChange:D,required:!0})),(0,a.createElement)(E,{label:"Status Jemaah",name:"status",value:c.status,onChange:D,required:!0},(0,a.createElement)("option",{value:"pending"},"Pending"),(0,a.createElement)("option",{value:"confirmed"},"Confirmed"),(0,a.createElement)("option",{value:"cancelled"},"Cancelled")),(0,a.createElement)(b,{label:"Catatan",name:"notes",value:c.notes,onChange:D}),m&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700 mb-3"},"Upload Dokumen"),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)("div",null,(0,a.createElement)(y,{label:`Upload KTP (File: ${c.ktp_scan?"Ada":"Kosong"})`,type:"file",onChange:e=>H(e.target.files[0])}),(0,a.createElement)(k,{type:"button",onClick:()=>Y(F,"ktp_scan",i.id),disabled:!F,className:"mt-2",variant:"outline"},"Upload KTP")),(0,a.createElement)("div",null,(0,a.createElement)(y,{label:`Upload Paspor (File: ${c.passport_scan?"Ada":"Kosong"})`,type:"file",onChange:e=>O(e.target.files[0])}),(0,a.createElement)(k,{type:"button",onClick:()=>Y(R,"passport_scan",i.id),disabled:!R,className:"mt-2",variant:"outline"},"Upload Paspor")))),(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("div",{className:"flex justify-between items-center mb-3"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700"},"Riwayat Pembayaran"),(0,a.createElement)(k,{type:"button",variant:"primary",onClick:()=>te(null)},"Tambah Pembayaran")),(0,a.createElement)(x,{message:X,type:"error"}),z&&!J.length?(0,a.createElement)(v,null):(0,a.createElement)("div",{className:"max-h-60 overflow-y-auto"},(0,a.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,a.createElement)("thead",{className:"bg-gray-50"},(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Tgl"),(0,a.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Jumlah"),(0,a.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Tahap"),(0,a.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),(0,a.createElement)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,a.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===J.length?(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:"5",className:"text-center py-4 text-sm text-gray-500"},"Belum ada pembayaran.")):J.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",{className:"px-3 py-2 text-sm"},p(e.payment_date)),(0,a.createElement)("td",{className:"px-3 py-2 text-sm"},h(e.amount)),(0,a.createElement)("td",{className:"px-3 py-2 text-sm"},e.payment_stage),(0,a.createElement)("td",{className:"px-3 py-2 text-sm"},(0,a.createElement)("span",{className:"px-2 py-0.5 rounded-full text-xs "+("verified"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800")},e.status)),(0,a.createElement)("td",{className:"px-3 py-2 text-sm text-right"},(0,a.createElement)("button",{type:"button",onClick:()=>te(e),className:"text-blue-600 hover:text-blue-800 mr-2"},"Edit"),(0,a.createElement)("button",{type:"button",onClick:()=>(async e=>{if(window.confirm("Yakin ingin menghapus pembayaran ini?")){Q(!0),Z(null);try{await N.del(`payments/${e}`),await ee(i.id),await $()}catch(e){Z(`Gagal menghapus pembayaran: ${e.message}`)}finally{Q(!1)}}})(e.id),className:"text-red-600 hover:text-red-800"},"Hapus"))))))))))),V&&(0,a.createElement)(A,{show:V,onClose:le,payment:G,onSave:async(e,a)=>{Q(!0),Z(null);try{let t;const l={...e,jamaah_id:i.id};t=G?await N.put(`payments/${G.id}`,l):await N.post("payments",l),a&&await(async(e,a)=>{const t=new FormData;t.append("file",a);const l=N.getToken(),n=await fetch(`${C.api_url}payments/${e}/upload_proof`,{method:"POST",headers:{Authorization:`Bearer ${l}`},body:t});if(!n.ok){const e=await n.json();throw new Error(e.message||"Upload bukti gagal")}})(t.id,a),await ee(i.id),await $(),le()}catch(e){Z(`Gagal menyimpan pembayaran: ${e.message}`)}finally{Q(!1)}},isLoading:z,error:X}))},A=({show:e,onClose:t,payment:l,onSave:n,isLoading:r,error:s})=>{const[o,m]=(0,a.useState)({payment_date:p(new Date),amount:0,payment_stage:"DP 1",status:"pending",notes:"",proof_url:""}),[i,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{m(l?{payment_date:p(l.payment_date),amount:l.amount,payment_stage:l.payment_stage,status:l.status,notes:l.notes||"",proof_url:l.proof_url||""}:{payment_date:p(new Date),amount:0,payment_stage:"DP 1",status:"pending",notes:"",proof_url:""}),c(null)},[l,e]);const d=e=>{const{name:a,value:t}=e.target;m(e=>({...e,[a]:t}))},u=e=>{e.preventDefault(),n(o,i)};return(0,a.createElement)(f,{show:e,onClose:t,title:l?"Edit Pembayaran":"Tambah Pembayaran Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:t,variant:"secondary",className:"mr-2",disabled:r},"Batal"),(0,a.createElement)(k,{onClick:u,type:"submit",form:"payment-form",disabled:r},r?"Menyimpan...":"Simpan Pembayaran"))},(0,a.createElement)(x,{message:s,type:"error"}),(0,a.createElement)("form",{id:"payment-form",onSubmit:u,className:"space-y-4"},(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Tanggal Bayar",name:"payment_date",type:"date",value:o.payment_date,onChange:d,required:!0}),(0,a.createElement)(y,{label:"Jumlah Bayar",name:"amount",type:"number",value:o.amount,onChange:d,required:!0})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Tahap Pembayaran",name:"payment_stage",value:o.payment_stage,onChange:d,placeholder:"e.g., DP 1, Cicilan 2, Pelunasan"}),(0,a.createElement)(E,{label:"Status",name:"status",value:o.status,onChange:d,required:!0},(0,a.createElement)("option",{value:"pending"},"Pending"),(0,a.createElement)("option",{value:"verified"},"Verified"),(0,a.createElement)("option",{value:"rejected"},"Rejected"))),(0,a.createElement)(b,{label:"Catatan",name:"notes",value:o.notes,onChange:d}),(0,a.createElement)(y,{label:"Upload Bukti Pembayaran",type:"file",onChange:e=>{c(e.target.files[0])}}),o.proof_url&&(0,a.createElement)("p",{className:"text-sm text-gray-600"},"Bukti saat ini: ",(0,a.createElement)("a",{href:o.proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline"},"Lihat File"))))},q=()=>{const e={transaction_date:p(new Date),type:"expense",category:"",description:"",amount:0},{list:t,isLoading:l,error:n,successMessage:r,isModalOpen:s,isEditing:o,formState:m,pagination:i,searchTerm:c,setPage:d,setSearchTerm:u,handleChange:g,handleAddNew:C,handleEdit:N,handleCloseModal:P,handleSubmit:D,handleDelete:M}=S("finance",e),j=[{key:"transaction_date",label:"Tanggal",render:e=>p(e.transaction_date)},{key:"type",label:"Tipe",render:e=>(0,a.createElement)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("income"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},e.type)},{key:"category",label:"Kategori"},{key:"description",label:"Deskripsi"},{key:"amount",label:"Jumlah",render:e=>h(e.amount)}];return(0,a.useMemo)(()=>t.reduce((e,a)=>"income"===a.type?e+parseFloat(a.amount):"expense"===a.type?e-parseFloat(a.amount):e,0),[t]),(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Keuangan"),(0,a.createElement)("div",{className:"flex items-center space-x-4"},(0,a.createElement)(k,{onClick:C},"Tambah Transaksi"))),(0,a.createElement)(x,{message:n,type:"error"}),(0,a.createElement)(x,{message:r,type:"success"}),(0,a.createElement)(w,{initialValue:c,onSearch:u}),l?(0,a.createElement)(v,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{columns:j,data:t,onEdit:N,onDelete:M}),(0,a.createElement)(_,{pagination:i,onPageChange:d})),(0,a.createElement)(f,{show:s,onClose:P,title:o?"Edit Transaksi":"Tambah Transaksi Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:P,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(k,{onClick:D,type:"submit",form:"finance-form"},"Simpan"))},(0,a.createElement)("form",{id:"finance-form",onSubmit:D},(0,a.createElement)(y,{label:"Tanggal",name:"transaction_date",type:"date",value:p(m.transaction_date),onChange:g,required:!0}),(0,a.createElement)(E,{label:"Tipe Transaksi",name:"type",value:m.type,onChange:g,required:!0},(0,a.createElement)("option",{value:"expense"},"Pengeluaran (Expense)"),(0,a.createElement)("option",{value:"income"},"Pemasukan (Income)")),(0,a.createElement)(y,{label:"Kategori",name:"category",value:m.category,onChange:g,placeholder:"e.g., Tiket Pesawat, Akomodasi, Gaji"}),(0,a.createElement)(y,{label:"Jumlah",name:"amount",type:"number",value:m.amount,onChange:g,required:!0}),(0,a.createElement)(b,{label:"Deskripsi",name:"description",value:m.description,onChange:g}))))},B=()=>{const e=(0,a.useCallback)(async()=>{const[e,a]=await Promise.all([N.get("users?page=1&search="),N.get("jamaah?page=1&search=")]);return{users:e.data||e,jamaah:a.data||a}},[]),{list:t,dependencies:l,isLoading:n,error:r,successMessage:s,isModalOpen:o,isEditing:m,formState:i,pagination:c,searchTerm:d,setPage:u,setSearchTerm:g,handleChange:h,handleAddNew:C,handleEdit:P,handleCloseModal:D,handleSubmit:M,handleDelete:j}=S("tasks",{title:"",description:"",assigned_to_user_id:"",jamaah_id:"",due_date:"",status:"pending",priority:"medium"},e),A=[{key:"title",label:"Judul Tugas"},{key:"assigned_to",label:"Ditugaskan Kepada",render:e=>l.users?.find(a=>a.id==e.assigned_to_user_id)?.full_name||"N/A"},{key:"jamaah",label:"Terkait Jemaah",render:e=>l.jamaah?.find(a=>a.id==e.jamaah_id)?.full_name||"N/A"},{key:"due_date",label:"Batas Waktu",render:e=>p(e.due_date)},{key:"priority",label:"Prioritas"},{key:"status",label:"Status"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Tugas"),(0,a.createElement)(k,{onClick:C},"Tambah Tugas Baru")),(0,a.createElement)(x,{message:r,type:"error"}),(0,a.createElement)(x,{message:s,type:"success"}),(0,a.createElement)(w,{initialValue:d,onSearch:g}),n?(0,a.createElement)(v,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{columns:A,data:t,onEdit:P,onDelete:j}),(0,a.createElement)(_,{pagination:c,onPageChange:u})),(0,a.createElement)(f,{show:o,onClose:D,title:m?"Edit Tugas":"Tambah Tugas Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:D,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(k,{onClick:M,type:"submit",form:"task-form"},"Simpan"))},(0,a.createElement)("form",{id:"task-form",onSubmit:M},(0,a.createElement)(y,{label:"Judul Tugas",name:"title",value:i.title,onChange:h,required:!0}),(0,a.createElement)(b,{label:"Deskripsi",name:"description",value:i.description,onChange:h}),(0,a.createElement)(E,{label:"Tugaskan Kepada",name:"assigned_to_user_id",value:i.assigned_to_user_id,onChange:h},(0,a.createElement)("option",{value:""},"Pilih Staff"),l.users?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.full_name))),(0,a.createElement)(E,{label:"Terkait Jemaah (Opsional)",name:"jamaah_id",value:i.jamaah_id,onChange:h},(0,a.createElement)("option",{value:""},"Pilih Jemaah"),l.jamaah?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.full_name))),(0,a.createElement)(y,{label:"Batas Waktu",name:"due_date",type:"date",value:p(i.due_date),onChange:h}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(E,{label:"Prioritas",name:"priority",value:i.priority,onChange:h},(0,a.createElement)("option",{value:"low"},"Rendah"),(0,a.createElement)("option",{value:"medium"},"Sedang"),(0,a.createElement)("option",{value:"high"},"Tinggi")),(0,a.createElement)(E,{label:"Status",name:"status",value:i.status,onChange:h},(0,a.createElement)("option",{value:"pending"},"Pending"),(0,a.createElement)("option",{value:"in_progress"},"In Progress"),(0,a.createElement)("option",{value:"completed"},"Completed"))))))},$=()=>{const e=(0,a.useCallback)(async()=>{const e=await N.get("roles?page=1&search=");return{roles:e.data||e}},[]),{list:t,dependencies:l,isLoading:n,error:r,successMessage:s,isModalOpen:o,isEditing:m,formState:i,pagination:c,searchTerm:d,setPage:u,setSearchTerm:g,handleChange:p,handleAddNew:h,handleEdit:b,handleCloseModal:C,handleSubmit:P,handleDelete:D}=S("users",{email:"",full_name:"",role:"agent",phone:"",status:"active",password:""},e),M=[{key:"full_name",label:"Nama Lengkap"},{key:"email",label:"Email (Login)"},{key:"role",label:"Role",render:e=>l.roles?.find(a=>a.role_key===e.role)?.role_name||e.role},{key:"phone",label:"Telepon"},{key:"status",label:"Status"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Pengguna (Staff)"),(0,a.createElement)(k,{onClick:h},"Tambah Staff Baru")),(0,a.createElement)(x,{message:r,type:"error"}),(0,a.createElement)(x,{message:s,type:"success"}),(0,a.createElement)(w,{initialValue:d,onSearch:g}),n?(0,a.createElement)(v,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{columns:M,data:t,onEdit:b,onDelete:D}),(0,a.createElement)(_,{pagination:c,onPageChange:u})),(0,a.createElement)(f,{show:o,onClose:C,title:m?"Edit Staff":"Tambah Staff Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:C,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(k,{onClick:P,type:"submit",form:"user-form"},"Simpan"))},(0,a.createElement)("form",{id:"user-form",onSubmit:P},(0,a.createElement)(y,{label:"Nama Lengkap",name:"full_name",value:i.full_name,onChange:p,required:!0}),(0,a.createElement)(y,{label:"Email (Untuk Login)",name:"email",type:"email",value:i.email,onChange:p,required:!0,disabled:m}),m?(0,a.createElement)(y,{label:"Password",name:"password",type:"password",value:i.password,onChange:p,placeholder:"Kosongkan jika tidak ingin mengubah"}):(0,a.createElement)(y,{label:"Password",name:"password",type:"password",value:i.password,onChange:p,required:!0}),(0,a.createElement)(y,{label:"Telepon",name:"phone",value:i.phone,onChange:p}),(0,a.createElement)(E,{label:"Role",name:"role",value:i.role,onChange:p,required:!0},(0,a.createElement)("option",{value:""},"Pilih Role"),l.roles?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.role_key},e.role_name))),(0,a.createElement)(E,{label:"Status",name:"status",value:i.status,onChange:p},(0,a.createElement)("option",{value:"active"},"Active"),(0,a.createElement)("option",{value:"inactive"},"Inactive")))))},L=()=>{const{list:e,isLoading:t,error:l,successMessage:n,isModalOpen:r,isEditing:s,formState:o,pagination:m,searchTerm:i,setPage:c,setSearchTerm:d,handleChange:u,handleAddNew:g,handleEdit:p,handleCloseModal:h,handleSubmit:E,handleDelete:C}=S("categories",{name:"",description:""});return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Kategori Paket"),(0,a.createElement)(k,{onClick:g},"Tambah Kategori")),(0,a.createElement)(x,{message:l,type:"error"}),(0,a.createElement)(x,{message:n,type:"success"}),(0,a.createElement)(w,{initialValue:i,onSearch:d}),t?(0,a.createElement)(v,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{columns:[{key:"name",label:"Nama Kategori"},{key:"description",label:"Deskripsi"}],data:e,onEdit:p,onDelete:C}),(0,a.createElement)(_,{pagination:m,onPageChange:c})),(0,a.createElement)(f,{show:r,onClose:h,title:s?"Edit Kategori":"Tambah Kategori",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:h,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(k,{onClick:E,type:"submit",form:"category-form"},"Simpan"))},(0,a.createElement)("form",{id:"category-form",onSubmit:E},(0,a.createElement)(y,{label:"Nama Kategori",name:"name",value:o.name,onChange:u,required:!0}),(0,a.createElement)(b,{label:"Deskripsi",name:"description",value:o.description,onChange:u}))))},K=()=>{const{list:e,isLoading:t,error:l,successMessage:n,isModalOpen:r,isEditing:s,formState:o,pagination:m,searchTerm:i,setPage:c,setSearchTerm:d,handleChange:u,handleAddNew:g,handleEdit:p,handleCloseModal:h,handleSubmit:b,handleDelete:E}=S("flights",{airline:"",flight_number:"",departure_airport_code:"",arrival_airport_code:"",departure_time:"",arrival_time:"",cost_per_seat:0,total_seats:0}),C=[{key:"airline",label:"Maskapai"},{key:"flight_number",label:"No. Penerbangan"},{key:"departure_airport_code",label:"Dari"},{key:"arrival_airport_code",label:"Ke"},{key:"departure_time",label:"Waktu Berangkat",render:e=>new Date(e.departure_time).toLocaleString("id-ID")},{key:"total_seats",label:"Kapasitas"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Data Pesawat"),(0,a.createElement)(k,{onClick:g},"Tambah Data Pesawat")),(0,a.createElement)(x,{message:l,type:"error"}),(0,a.createElement)(x,{message:n,type:"success"}),(0,a.createElement)(w,{initialValue:i,onSearch:d}),t?(0,a.createElement)(v,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{columns:C,data:e,onEdit:p,onDelete:E}),(0,a.createElement)(_,{pagination:m,onPageChange:c})),(0,a.createElement)(f,{show:r,onClose:h,title:s?"Edit Data Pesawat":"Tambah Data Pesawat",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:h,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(k,{onClick:b,type:"submit",form:"flight-form"},"Simpan"))},(0,a.createElement)("form",{id:"flight-form",onSubmit:b,className:"space-y-4"},(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Maskapai",name:"airline",value:o.airline,onChange:u,required:!0}),(0,a.createElement)(y,{label:"No. Penerbangan",name:"flight_number",value:o.flight_number,onChange:u,required:!0})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Kode Airport (Berangkat)",name:"departure_airport_code",value:o.departure_airport_code,onChange:u,required:!0,placeholder:"e.g., JED"}),(0,a.createElement)(y,{label:"Kode Airport (Tiba)",name:"arrival_airport_code",value:o.arrival_airport_code,onChange:u,required:!0,placeholder:"e.g., CGK"})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Waktu Berangkat",name:"departure_time",type:"datetime-local",value:o.departure_time,onChange:u,required:!0}),(0,a.createElement)(y,{label:"Waktu Tiba",name:"arrival_time",type:"datetime-local",value:o.arrival_time,onChange:u,required:!0})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Biaya per Kursi",name:"cost_per_seat",type:"number",value:o.cost_per_seat,onChange:u}),(0,a.createElement)(y,{label:"Total Kursi",name:"total_seats",type:"number",value:o.total_seats,onChange:u})))))},F=()=>{const{list:e,isLoading:t,error:l,successMessage:n,isModalOpen:r,isEditing:s,formState:o,pagination:m,searchTerm:i,setPage:c,setSearchTerm:d,handleChange:u,handleAddNew:g,handleEdit:p,handleCloseModal:h,handleSubmit:E,handleDelete:C}=S("hotels",{name:"",address:"",city:"Mekkah",country:"Saudi Arabia",phone:"",email:"",rating:5});return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Data Hotel"),(0,a.createElement)(k,{onClick:g},"Tambah Data Hotel")),(0,a.createElement)(x,{message:l,type:"error"}),(0,a.createElement)(x,{message:n,type:"success"}),(0,a.createElement)(w,{initialValue:i,onSearch:d}),t?(0,a.createElement)(v,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{columns:[{key:"name",label:"Nama Hotel"},{key:"city",label:"Kota"},{key:"rating",label:"Bintang",render:e=>`${e.rating} Bintang`},{key:"phone",label:"Telepon"}],data:e,onEdit:p,onDelete:C}),(0,a.createElement)(_,{pagination:m,onPageChange:c})),(0,a.createElement)(f,{show:r,onClose:h,title:s?"Edit Data Hotel":"Tambah Data Hotel",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:h,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(k,{onClick:E,type:"submit",form:"hotel-form"},"Simpan"))},(0,a.createElement)("form",{id:"hotel-form",onSubmit:E,className:"space-y-4"},(0,a.createElement)(y,{label:"Nama Hotel",name:"name",value:o.name,onChange:u,required:!0}),(0,a.createElement)(b,{label:"Alamat",name:"address",value:o.address,onChange:u}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,a.createElement)(y,{label:"Kota",name:"city",value:o.city,onChange:u}),(0,a.createElement)(y,{label:"Negara",name:"country",value:o.country,onChange:u}),(0,a.createElement)(y,{label:"Bintang (1-5)",name:"rating",type:"number",min:"1",max:"5",value:o.rating,onChange:u})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(y,{label:"Telepon",name:"phone",value:o.phone,onChange:u}),(0,a.createElement)(y,{label:"Email",name:"email",type:"email",value:o.email,onChange:u})))))},H=()=>{const{list:e,isLoading:t,error:l,successMessage:n,isModalOpen:r,isEditing:s,formState:o,pagination:m,searchTerm:i,setPage:c,setSearchTerm:d,handleChange:u,handleAddNew:g,handleEdit:p,handleCloseModal:h,handleSubmit:b,handleDelete:E}=S("roles",{role_key:"",role_name:""});return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Role Karyawan"),(0,a.createElement)(k,{onClick:g},"Tambah Role Baru")),(0,a.createElement)(x,{message:l,type:"error"}),(0,a.createElement)(x,{message:n,type:"success"}),(0,a.createElement)(w,{initialValue:i,onSearch:d}),t?(0,a.createElement)(v,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{columns:[{key:"role_name",label:"Nama Role"},{key:"role_key",label:"Kunci Role (untuk sistem)"}],data:e,onEdit:p,onDelete:E}),(0,a.createElement)(_,{pagination:m,onPageChange:c})),(0,a.createElement)(f,{show:r,onClose:h,title:s?"Edit Role":"Tambah Role Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k,{onClick:h,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(k,{onClick:b,type:"submit",form:"role-form"},"Simpan"))},(0,a.createElement)("form",{id:"role-form",onSubmit:b},(0,a.createElement)(y,{label:"Nama Role",name:"role_name",value:o.role_name,onChange:u,required:!0,placeholder:"e.g., Staf Keuangan"}),(0,a.createElement)(y,{label:"Kunci Role",name:"role_key",value:o.role_key,onChange:u,required:!0,placeholder:"e.g., finance_staff"}))))},R=({user:e,onLogout:t})=>(0,a.createElement)("header",{className:"bg-blue-700 text-white shadow-lg"},(0,a.createElement)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},(0,a.createElement)("div",{className:"flex justify-between items-center h-16"},(0,a.createElement)("div",{className:"flex-shrink-0"},(0,a.createElement)("span",{className:"text-2xl font-bold text-white"},"Travel"),(0,a.createElement)("span",{className:"text-2xl font-bold text-blue-200"},"Manajemen")),(0,a.createElement)("div",{className:"text-sm text-blue-100"},"Selamat datang, ",(0,a.createElement)("span",{className:"font-medium text-white"},e.name||"Pengguna"))))),O=({currentView:e,setView:t})=>(0,a.createElement)("nav",{className:"bg-white shadow-sm"},(0,a.createElement)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},(0,a.createElement)("div",{className:"flex space-x-6 overflow-x-auto py-1"},[{key:"dashboard",label:"Dashboard"},{key:"packages",label:"Paket"},{key:"categories",label:"Kategori Paket"},{key:"jamaah",label:"Jemaah (Manifest)"},{key:"finance",label:"Keuangan"},{key:"tasks",label:"Tugas"},{key:"data_master",label:"Data Master",subItems:[{key:"flights",label:"Data Pesawat"},{key:"hotels",label:"Data Hotel"}]},{key:"hr",label:"HRD",subItems:[{key:"users",label:"Staff"},{key:"roles",label:"Roles"}]}].map(l=>l.subItems?(0,a.createElement)(I,{key:l.key,item:l,currentView:e,setView:t}):(0,a.createElement)(J,{key:l.key,item:l,isActive:e===l.key,onClick:()=>t(l.key)}))))),J=({item:e,isActive:t,onClick:l})=>(0,a.createElement)("button",{onClick:l,className:"px-3 py-4 text-sm font-medium border-b-2 transition-all duration-150 whitespace-nowrap\n            "+(t?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:border-gray-300 hover:text-gray-800")},e.label),I=({item:e,currentView:t,setView:l})=>{const[n,r]=(0,a.useState)(!1),s=e.subItems.some(e=>e.key===t);return(0,a.createElement)("div",{className:"relative",onMouseLeave:()=>r(!1)},(0,a.createElement)("button",{onMouseEnter:()=>r(!0),className:"px-3 py-4 text-sm font-medium border-b-2 transition-all duration-150 flex items-center whitespace-nowrap\n                    "+(s?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:border-gray-300 hover:text-gray-800")},e.label,(0,a.createElement)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,a.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"}))),n&&(0,a.createElement)("div",{className:"absolute z-10 top-full left-0 mt-0 w-48 bg-white shadow-lg rounded-md border border-gray-200 py-1"},e.subItems.map(e=>(0,a.createElement)("button",{key:e.key,onClick:()=>{l(e.key),r(!1)},className:"block w-full text-left px-4 py-2 text-sm \n                                "+(t===e.key?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-100")},e.label))))},V=()=>{const[e,t]=(0,a.useState)("dashboard"),[l,n]=(0,a.useState)(C.user);return(0,a.useEffect)(()=>{"super_admin"===C.user.role&&(async()=>{if(C.user&&C.user.token)try{await N.get("users/me"),n(C.user)}catch(e){console.warn("Token kadaluarsa, mencoba auto-login...");try{const e=await N.post("auth/wp-login",{});C.user.token=e.token,n(e.user)}catch(e){console.error("Auto-login gagal:",e),n({name:"Error",role:"guest",token:null})}}else if(C.user&&"super_admin"===C.user.role&&!C.user.token)try{console.log("Mencoba auto-login Super Admin...");const e=await N.post("auth/wp-login",{});C.user.token=e.token,n(e.user)}catch(e){console.error("Gagal auto-login Super Admin:",e)}})()},[]),(0,a.createElement)("div",{className:"min-h-screen bg-gray-100"},(0,a.createElement)(R,{user:l}),(0,a.createElement)(O,{currentView:e,setView:t}),(0,a.createElement)("main",null,(0,a.createElement)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},(0,a.createElement)("div",{className:"bg-white p-6 rounded-lg shadow-lg"},(()=>{switch(e){case"dashboard":default:return(0,a.createElement)(D,null);case"packages":return(0,a.createElement)(M,null);case"jamaah":return(0,a.createElement)(j,null);case"finance":return(0,a.createElement)(q,null);case"tasks":return(0,a.createElement)(B,null);case"users":return(0,a.createElement)($,null);case"categories":return(0,a.createElement)(L,null);case"flights":return(0,a.createElement)(K,null);case"hotels":return(0,a.createElement)(F,null);case"roles":return(0,a.createElement)(H,null)}})()))))};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("umh-react-app");e?n().render((0,a.createElement)(V,null),e):console.error("Target div 'umh-react-app' not found.")})})();