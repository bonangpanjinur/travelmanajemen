(()=>{"use strict";const e=window.React,a=window.wp.element,t=e=>{if(!e)return"";try{const a=new Date(e);return isNaN(a.getTime())?"":a.toISOString().split("T")[0]}catch(e){return""}},l=e=>null==e?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),n=({label:a,type:t="text",name:l,value:n,onChange:r,required:s=!1,...m})=>(0,e.createElement)("div",{className:"mb-4"},(0,e.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:l},a," ",s&&(0,e.createElement)("span",{className:"text-red-500"},"*")),(0,e.createElement)("input",{type:t,id:l,name:l,value:n||"",onChange:r,required:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",...m})),r=({label:a,name:t,value:l,onChange:n,...r})=>(0,e.createElement)("div",{className:"mb-4"},(0,e.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:t},a),(0,e.createElement)("textarea",{id:t,name:t,value:l||"",onChange:n,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",...r})),s=({label:a,name:t,value:l,onChange:n,children:r,required:s=!1,...m})=>(0,e.createElement)("div",{className:"mb-4"},(0,e.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:t},a," ",s&&(0,e.createElement)("span",{className:"text-red-500"},"*")),(0,e.createElement)("select",{id:t,name:t,value:l||"",onChange:n,required:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white",...m},r)),m=({show:a,onClose:t,title:l,children:n,footer:r})=>a?(0,e.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300"},(0,e.createElement)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col transition-transform duration-300 transform scale-95 opacity-0 animate-modal-in"},(0,e.createElement)("div",{className:"flex justify-between items-center p-5 border-b"},(0,e.createElement)("h3",{className:"text-lg font-semibold text-gray-800"},l),(0,e.createElement)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors"},(0,e.createElement)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))),(0,e.createElement)("div",{className:"p-6 overflow-y-auto"},n),(0,e.createElement)("div",{className:"flex justify-end items-center p-5 border-t bg-gray-50 rounded-b-lg"},r))):null,o=({onClick:a,children:t,variant:l="primary",type:n="button",...r})=>(0,e.createElement)("button",{type:n,onClick:a,className:`px-4 py-2 rounded-md font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 ${{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500"}[l]}`,...r},t),i=()=>(0,e.createElement)("div",{className:"flex justify-center items-center h-64"},(0,e.createElement)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})),c=({message:a,type:t="error"})=>a?(0,e.createElement)("div",{className:`border px-4 py-3 rounded-md my-4 ${{error:"bg-red-100 border-red-400 text-red-700",success:"bg-green-100 border-green-400 text-green-700"}[t]}`,role:"alert"},(0,e.createElement)("span",{className:"block sm:inline"},a)):null,d=window.umh_wp_data||{api_url:"/wp-json/umh/v1/",nonce:"",user:{token:""}},u={getToken:()=>d.user?d.user.token:null,request:async(e,a="GET",t=null)=>{const l={method:a,headers:{"Content-Type":"application/json",Authorization:`Bearer ${u.getToken()}`}};t&&(l.body=JSON.stringify(t));try{const a=await fetch(d.api_url+e,l);if(204===a.status)return{success:!0};const t=await a.json();if(!a.ok)throw new Error(t.message||`Error ${a.status}: ${a.statusText}`);return t}catch(t){throw console.error(`API Error (${a} ${e}):`,t),t}},get:e=>u.request(e,"GET"),post:(e,a)=>u.request(e,"POST",a),put:(e,a)=>u.request(e,"PUT",a),del:e=>u.request(e,"DELETE")},g=(a,t,l)=>{const[n,r]=(0,e.useState)([]),[s,m]=(0,e.useState)({}),[o,i]=(0,e.useState)(!0),[c,d]=(0,e.useState)(null),[g,p]=(0,e.useState)(!1),[E,b]=(0,e.useState)(!1),[y,h]=(0,e.useState)(null),[f,k]=(0,e.useState)(t),[v,x]=(0,e.useState)(null),_=e=>{x(e),setTimeout(()=>x(null),3e3)},N=(0,e.useCallback)(async()=>{if(l)try{const e=await l();m(e||{})}catch(e){d(`Gagal memuat data pendukung: ${e.message}`)}},[l]),w=(0,e.useCallback)(async()=>{i(!0),d(null);try{await N();const e=await u.get(a);r(e)}catch(e){d(`Gagal memuat data ${a}: ${e.message}`)}finally{i(!1)}},[a,N]);(0,e.useEffect)(()=>{w()},[w]);const C=()=>{p(!1),d(null)};return{list:n,dependencies:s,isLoading:o,error:c,successMessage:v,isModalOpen:g,isEditing:E,currentItem:y,formState:f,handleChange:e=>{const{name:a,value:t,type:l,checked:n}=e.target;k(e=>({...e,[a]:"checkbox"===l?n:t}))},handleAddNew:()=>{b(!1),h(null),k(t),p(!0)},handleEdit:e=>{b(!0),h(e),k(e),p(!0)},handleCloseModal:C,handleSubmit:async e=>{e.preventDefault(),d(null);try{let e;E?(e=await u.put(`${a}/${y.id}`,f),_("Data berhasil diperbarui.")):(e=await u.post(a,f),_("Data berhasil ditambahkan.")),w(),C()}catch(e){d(`Gagal menyimpan: ${e.message}`)}},handleDelete:async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus data ini?")){d(null);try{await u.del(`${a}/${e}`),_("Data berhasil dihapus."),w()}catch(e){d(`Gagal menghapus: ${e.message}`)}}},fetchData:w,setError:d,setFormState:k,fetchDependencies:N}},p=({columns:a,data:t,onEdit:l,onDelete:n})=>(0,e.createElement)("div",{className:"overflow-x-auto shadow-md rounded-lg"},(0,e.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,e.createElement)("thead",{className:"bg-gray-100"},(0,e.createElement)("tr",null,a.map(a=>(0,e.createElement)("th",{key:a.key,className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},a.label)),(0,e.createElement)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Aksi"))),(0,e.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===t.length?(0,e.createElement)("tr",null,(0,e.createElement)("td",{colSpan:a.length+1,className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data.")):t.map(t=>(0,e.createElement)("tr",{key:t.id,className:"hover:bg-gray-50"},a.map(a=>(0,e.createElement)("td",{key:a.key,className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800"},a.render?a.render(t):t[a.key])),(0,e.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},(0,e.createElement)("button",{onClick:()=>l(t),className:"text-blue-600 hover:text-blue-800 mr-3"},"Edit"),(0,e.createElement)("button",{onClick:()=>n(t.id),className:"text-red-600 hover:text-red-800"},"Hapus"))))))),E=()=>{const[a,t]=(0,e.useState)(null),[n,r]=(0,e.useState)(!0),[s,m]=(0,e.useState)(null);return(0,e.useEffect)(()=>{(async()=>{try{r(!0);const e=await u.get("stats");t(e)}catch(e){m(e.message)}finally{r(!1)}})()},[]),n?(0,e.createElement)(i,null):s?(0,e.createElement)(c,{message:`Gagal memuat statistik: ${s}`}):a?(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},(0,e.createElement)(b,{title:"Total Jemaah",value:a.total_jamaah||0}),(0,e.createElement)(b,{title:"Total Paket",value:a.total_packages||0}),(0,e.createElement)(b,{title:"Total Pemasukan",value:l(a.total_income||0)}),(0,e.createElement)(b,{title:"Jemaah Lunas",value:a.total_jamaah_lunas||0})):(0,e.createElement)("p",null,"Data statistik tidak ditemukan.")},b=({title:a,value:t})=>(0,e.createElement)("div",{className:"bg-white p-6 rounded-lg shadow-md"},(0,e.createElement)("h3",{className:"text-sm font-medium text-gray-500 uppercase"},a),(0,e.createElement)("p",{className:"mt-2 text-3xl font-semibold text-gray-900"},t)),y=()=>{const a=(0,e.useCallback)(async()=>({categories:await u.get("categories")}),[]),{list:d,dependencies:E,isLoading:b,error:y,successMessage:h,isModalOpen:f,isEditing:k,formState:v,handleChange:x,handleAddNew:_,handleEdit:N,handleCloseModal:w,handleSubmit:C,handleDelete:S}=g("packages",{name:"",category_id:"",description:"",price_quad:0,price_triple:0,price_double:0,departure_date:"",duration_days:0,status:"draft"},a),T=[{key:"name",label:"Nama Paket"},{key:"category",label:"Kategori",render:e=>E.categories?.find(a=>a.id==e.category_id)?.name||"N/A"},{key:"price_double",label:"Harga (Double)",render:e=>l(e.price_double)},{key:"departure_date",label:"Keberangkatan",render:e=>t(e.departure_date)},{key:"duration_days",label:"Durasi (Hari)"},{key:"status",label:"Status"}];return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,e.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Paket"),(0,e.createElement)(o,{onClick:_},"Tambah Paket Baru")),(0,e.createElement)(c,{message:y,type:"error"}),(0,e.createElement)(c,{message:h,type:"success"}),b?(0,e.createElement)(i,null):(0,e.createElement)(p,{columns:T,data:d,onEdit:N,onDelete:S}),(0,e.createElement)(m,{show:f,onClose:w,title:k?"Edit Paket":"Tambah Paket Baru",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:w,variant:"secondary",className:"mr-2"},"Batal"),(0,e.createElement)(o,{onClick:C,type:"submit",form:"package-form"},"Simpan"))},(0,e.createElement)("form",{id:"package-form",onSubmit:C},(0,e.createElement)(n,{label:"Nama Paket",name:"name",value:v.name,onChange:x,required:!0}),(0,e.createElement)(s,{label:"Kategori",name:"category_id",value:v.category_id,onChange:x,required:!0},(0,e.createElement)("option",{value:""},"Pilih Kategori"),E.categories?.map(a=>(0,e.createElement)("option",{key:a.id,value:a.id},a.name))),(0,e.createElement)(r,{label:"Deskripsi",name:"description",value:v.description,onChange:x}),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,e.createElement)(n,{label:"Harga Double",name:"price_double",type:"number",value:v.price_double,onChange:x}),(0,e.createElement)(n,{label:"Harga Triple",name:"price_triple",type:"number",value:v.price_triple,onChange:x}),(0,e.createElement)(n,{label:"Harga Quad",name:"price_quad",type:"number",value:v.price_quad,onChange:x})),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Tanggal Keberangkatan",name:"departure_date",type:"date",value:t(v.departure_date),onChange:x,required:!0}),(0,e.createElement)(n,{label:"Durasi (hari)",name:"duration_days",type:"number",value:v.duration_days,onChange:x,required:!0})),(0,e.createElement)(s,{label:"Status",name:"status",value:v.status,onChange:x,required:!0},(0,e.createElement)("option",{value:"draft"},"Draft"),(0,e.createElement)("option",{value:"published"},"Published"),(0,e.createElement)("option",{value:"archived"},"Archived")))))},h=()=>{const a=(0,e.useCallback)(async()=>({packages:await u.get("packages")}),[]),{list:E,dependencies:b,isLoading:y,error:h,successMessage:k,isModalOpen:v,isEditing:x,currentItem:_,formState:N,handleChange:w,handleAddNew:C,handleEdit:S,handleCloseModal:T,handleSubmit:D,handleDelete:P,fetchData:j,setError:M,setFormState:B}=g("jamaah",{full_name:"",package_id:"",birth_date:"",gender:"Laki-laki",address:"",phone:"",email:"",passport_number:"",passport_expiry:"",ktp_number:"",room_type:"Quad",total_price:0,status:"pending",notes:""},a),[q,K]=(0,e.useState)(null),[L,A]=(0,e.useState)(null),[$,F]=(0,e.useState)([]),[J,R]=(0,e.useState)(!1),[I,O]=(0,e.useState)(null),[H,G]=(0,e.useState)(!1),[U,V]=(0,e.useState)(null),W=async(e,a,t)=>{if(!e)return;const l=new FormData;l.append("file",e),l.append("jamaah_id",t),l.append("upload_type",a);try{const e=u.getToken(),t=await fetch(`${d.api_url}uploads`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:l});if(!t.ok){const e=await t.json();throw new Error(e.message||"Upload gagal")}const n=await t.json();B(e=>({...e,[a]:n.file_url})),j(),"ktp_scan"===a&&K(null),"passport_scan"===a&&A(null)}catch(e){M(`Upload ${a} gagal: ${e.message}`)}},z=async e=>{if(e){G(!0),V(null);try{const a=await u.get(`payments?jamaah_id=${e}`);F(a)}catch(e){V(`Gagal memuat pembayaran: ${e.message}`)}finally{G(!1)}}},Q=()=>{T(),F([]),V(null),K(null),A(null)},Y=(e=null)=>{O(e),R(!0)},X=()=>{O(null),R(!1),V(null)},Z=[{key:"full_name",label:"Nama Jemaah"},{key:"package",label:"Paket",render:e=>b.packages?.find(a=>a.id==e.package_id)?.name||"N/A"},{key:"phone",label:"Telepon"},{key:"email",label:"Email"},{key:"payment_status",label:"Status Bayar",render:a=>{const t=a.payment_status||"Belum Lunas";return(0,e.createElement)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{Lunas:"bg-green-100 text-green-800",Cicil:"bg-yellow-100 text-yellow-800","Belum Lunas":"bg-red-100 text-red-800"}[t]}`},t)}},{key:"amount_paid",label:"Total Bayar",render:e=>l(e.amount_paid)},{key:"status",label:"Status Jemaah"}];return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,e.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Jemaah (Manifest)"),(0,e.createElement)(o,{onClick:C},"Tambah Jemaah Baru")),(0,e.createElement)(c,{message:h,type:"error"}),(0,e.createElement)(c,{message:k,type:"success"}),y?(0,e.createElement)(i,null):(0,e.createElement)(p,{columns:Z,data:E,onEdit:e=>{S(e),z(e.id)},onDelete:P}),(0,e.createElement)(m,{show:v,onClose:Q,title:x?"Edit Jemaah":"Tambah Jemaah Baru",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:Q,variant:"secondary",className:"mr-2"},"Batal"),(0,e.createElement)(o,{onClick:D,type:"submit",form:"jamaah-form"},"Simpan Jemaah"))},(0,e.createElement)(c,{message:h,type:"error"}),(0,e.createElement)("form",{id:"jamaah-form",onSubmit:D,className:"space-y-4"},(0,e.createElement)(n,{label:"Nama Lengkap",name:"full_name",value:N.full_name,onChange:w,required:!0}),(0,e.createElement)(s,{label:"Paket",name:"package_id",value:N.package_id,onChange:w,required:!0},(0,e.createElement)("option",{value:""},"Pilih Paket"),b.packages?.map(a=>(0,e.createElement)("option",{key:a.id,value:a.id},a.name," (",l(a.price_double),")"))),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Tanggal Lahir",name:"birth_date",type:"date",value:t(N.birth_date),onChange:w}),(0,e.createElement)(s,{label:"Jenis Kelamin",name:"gender",value:N.gender,onChange:w},(0,e.createElement)("option",{value:"Laki-laki"},"Laki-laki"),(0,e.createElement)("option",{value:"Perempuan"},"Perempuan"))),(0,e.createElement)(r,{label:"Alamat",name:"address",value:N.address,onChange:w}),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Telepon",name:"phone",value:N.phone,onChange:w,required:!0}),(0,e.createElement)(n,{label:"Email",name:"email",type:"email",value:N.email,onChange:w})),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"No. KTP",name:"ktp_number",value:N.ktp_number,onChange:w}),(0,e.createElement)(n,{label:"No. Paspor",name:"passport_number",value:N.passport_number,onChange:w})),(0,e.createElement)(n,{label:"Tgl Kadaluarsa Paspor",name:"passport_expiry",type:"date",value:t(N.passport_expiry),onChange:w}),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(s,{label:"Tipe Kamar",name:"room_type",value:N.room_type,onChange:w},(0,e.createElement)("option",{value:"Quad"},"Quad (4)"),(0,e.createElement)("option",{value:"Triple"},"Triple (3)"),(0,e.createElement)("option",{value:"Double"},"Double (2)")),(0,e.createElement)(n,{label:"Total Harga Paket",name:"total_price",type:"number",value:N.total_price,onChange:w,required:!0})),(0,e.createElement)(s,{label:"Status Jemaah",name:"status",value:N.status,onChange:w,required:!0},(0,e.createElement)("option",{value:"pending"},"Pending"),(0,e.createElement)("option",{value:"confirmed"},"Confirmed"),(0,e.createElement)("option",{value:"cancelled"},"Cancelled")),(0,e.createElement)(r,{label:"Catatan",name:"notes",value:N.notes,onChange:w}),x&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,e.createElement)("h4",{className:"font-semibold text-gray-700 mb-3"},"Upload Dokumen"),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)("div",null,(0,e.createElement)(n,{label:`Upload KTP (File: ${N.ktp_scan?"Ada":"Kosong"})`,type:"file",onChange:e=>K(e.target.files[0])}),(0,e.createElement)(o,{type:"button",onClick:()=>W(q,"ktp_scan",_.id),disabled:!q,className:"mt-2",variant:"outline"},"Upload KTP")),(0,e.createElement)("div",null,(0,e.createElement)(n,{label:`Upload Paspor (File: ${N.passport_scan?"Ada":"Kosong"})`,type:"file",onChange:e=>A(e.target.files[0])}),(0,e.createElement)(o,{type:"button",onClick:()=>W(L,"passport_scan",_.id),disabled:!L,className:"mt-2",variant:"outline"},"Upload Paspor")))),(0,e.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,e.createElement)("div",{className:"flex justify-between items-center mb-3"},(0,e.createElement)("h4",{className:"font-semibold text-gray-700"},"Riwayat Pembayaran"),(0,e.createElement)(o,{type:"button",variant:"primary",onClick:()=>Y(null)},"Tambah Pembayaran")),(0,e.createElement)(c,{message:U,type:"error"}),H&&!$.length?(0,e.createElement)(i,null):(0,e.createElement)("div",{className:"max-h-60 overflow-y-auto"},(0,e.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,e.createElement)("thead",{className:"bg-gray-50"},(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Tgl"),(0,e.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Jumlah"),(0,e.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Tahap"),(0,e.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),(0,e.createElement)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,e.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===$.length?(0,e.createElement)("tr",null,(0,e.createElement)("td",{colSpan:"5",className:"text-center py-4 text-sm text-gray-500"},"Belum ada pembayaran.")):$.map(a=>(0,e.createElement)("tr",{key:a.id},(0,e.createElement)("td",{className:"px-3 py-2 text-sm"},t(a.payment_date)),(0,e.createElement)("td",{className:"px-3 py-2 text-sm"},l(a.amount)),(0,e.createElement)("td",{className:"px-3 py-2 text-sm"},a.payment_stage),(0,e.createElement)("td",{className:"px-3 py-2 text-sm"},(0,e.createElement)("span",{className:"px-2 py-0.5 rounded-full text-xs "+("verified"===a.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800")},a.status)),(0,e.createElement)("td",{className:"px-3 py-2 text-sm text-right"},(0,e.createElement)("button",{type:"button",onClick:()=>Y(a),className:"text-blue-600 hover:text-blue-800 mr-2"},"Edit"),(0,e.createElement)("button",{type:"button",onClick:()=>(async e=>{if(window.confirm("Yakin ingin menghapus pembayaran ini?")){G(!0),V(null);try{await u.del(`payments/${e}`),await z(_.id),await j()}catch(e){V(`Gagal menghapus pembayaran: ${e.message}`)}finally{G(!1)}}})(a.id),className:"text-red-600 hover:text-red-800"},"Hapus"))))))))))),J&&(0,e.createElement)(f,{show:J,onClose:X,payment:I,onSave:async(e,a)=>{G(!0),V(null);try{let t;const l={...e,jamaah_id:_.id};t=I?await u.put(`payments/${I.id}`,l):await u.post("payments",l),a&&await(async(e,a)=>{const t=new FormData;t.append("file",a);const l=u.getToken(),n=await fetch(`${d.api_url}payments/${e}/upload_proof`,{method:"POST",headers:{Authorization:`Bearer ${l}`},body:t});if(!n.ok){const e=await n.json();throw new Error(e.message||"Upload bukti gagal")}})(t.id,a),await z(_.id),await j(),X()}catch(e){V(`Gagal menyimpan pembayaran: ${e.message}`)}finally{G(!1)}},isLoading:H,error:U}))},f=({show:a,onClose:l,payment:i,onSave:d,isLoading:u,error:g})=>{const[p,E]=(0,e.useState)({payment_date:t(new Date),amount:0,payment_stage:"DP 1",status:"pending",notes:"",proof_url:""}),[b,y]=(0,e.useState)(null);(0,e.useEffect)(()=>{E(i?{payment_date:t(i.payment_date),amount:i.amount,payment_stage:i.payment_stage,status:i.status,notes:i.notes||"",proof_url:i.proof_url||""}:{payment_date:t(new Date),amount:0,payment_stage:"DP 1",status:"pending",notes:"",proof_url:""}),y(null)},[i,a]);const h=e=>{const{name:a,value:t}=e.target;E(e=>({...e,[a]:t}))},f=e=>{e.preventDefault(),d(p,b)};return(0,e.createElement)(m,{show:a,onClose:l,title:i?"Edit Pembayaran":"Tambah Pembayaran Baru",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:l,variant:"secondary",className:"mr-2",disabled:u},"Batal"),(0,e.createElement)(o,{onClick:f,type:"submit",form:"payment-form",disabled:u},u?"Menyimpan...":"Simpan Pembayaran"))},(0,e.createElement)(c,{message:g,type:"error"}),(0,e.createElement)("form",{id:"payment-form",onSubmit:f,className:"space-y-4"},(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Tanggal Bayar",name:"payment_date",type:"date",value:p.payment_date,onChange:h,required:!0}),(0,e.createElement)(n,{label:"Jumlah Bayar",name:"amount",type:"number",value:p.amount,onChange:h,required:!0})),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Tahap Pembayaran",name:"payment_stage",value:p.payment_stage,onChange:h,placeholder:"e.g., DP 1, Cicilan 2, Pelunasan"}),(0,e.createElement)(s,{label:"Status",name:"status",value:p.status,onChange:h,required:!0},(0,e.createElement)("option",{value:"pending"},"Pending"),(0,e.createElement)("option",{value:"verified"},"Verified"),(0,e.createElement)("option",{value:"rejected"},"Rejected"))),(0,e.createElement)(r,{label:"Catatan",name:"notes",value:p.notes,onChange:h}),(0,e.createElement)(n,{label:"Upload Bukti Pembayaran",type:"file",onChange:e=>{y(e.target.files[0])}}),p.proof_url&&(0,e.createElement)("p",{className:"text-sm text-gray-600"},"Bukti saat ini: ",(0,e.createElement)("a",{href:p.proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline"},"Lihat File"))))},k=()=>{const a={transaction_date:t(new Date),type:"expense",category:"",description:"",amount:0},{list:d,isLoading:u,error:E,successMessage:b,isModalOpen:y,isEditing:h,formState:f,handleChange:k,handleAddNew:v,handleEdit:x,handleCloseModal:_,handleSubmit:N,handleDelete:w}=g("finance",a),C=[{key:"transaction_date",label:"Tanggal",render:e=>t(e.transaction_date)},{key:"type",label:"Tipe",render:a=>(0,e.createElement)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("income"===a.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},a.type)},{key:"category",label:"Kategori"},{key:"description",label:"Deskripsi"},{key:"amount",label:"Jumlah",render:e=>l(e.amount)}],S=(0,e.useMemo)(()=>d.reduce((e,a)=>"income"===a.type?e+parseFloat(a.amount):"expense"===a.type?e-parseFloat(a.amount):e,0),[d]);return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,e.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Keuangan"),(0,e.createElement)("div",{className:"flex items-center space-x-4"},(0,e.createElement)("div",{className:"text-right"},(0,e.createElement)("span",{className:"text-sm text-gray-500"},"Total Saldo"),(0,e.createElement)("p",{className:"text-xl font-semibold "+(S>=0?"text-green-600":"text-red-600")},l(S))),(0,e.createElement)(o,{onClick:v},"Tambah Transaksi"))),(0,e.createElement)(c,{message:E,type:"error"}),(0,e.createElement)(c,{message:b,type:"success"}),u?(0,e.createElement)(i,null):(0,e.createElement)(p,{columns:C,data:d,onEdit:x,onDelete:w}),(0,e.createElement)(m,{show:y,onClose:_,title:h?"Edit Transaksi":"Tambah Transaksi Baru",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:_,variant:"secondary",className:"mr-2"},"Batal"),(0,e.createElement)(o,{onClick:N,type:"submit",form:"finance-form"},"Simpan"))},(0,e.createElement)("form",{id:"finance-form",onSubmit:N},(0,e.createElement)(n,{label:"Tanggal",name:"transaction_date",type:"date",value:t(f.transaction_date),onChange:k,required:!0}),(0,e.createElement)(s,{label:"Tipe Transaksi",name:"type",value:f.type,onChange:k,required:!0},(0,e.createElement)("option",{value:"expense"},"Pengeluaran (Expense)"),(0,e.createElement)("option",{value:"income"},"Pemasukan (Income)")),(0,e.createElement)(n,{label:"Kategori",name:"category",value:f.category,onChange:k,placeholder:"e.g., Tiket Pesawat, Akomodasi, Gaji"}),(0,e.createElement)(n,{label:"Jumlah",name:"amount",type:"number",value:f.amount,onChange:k,required:!0}),(0,e.createElement)(r,{label:"Deskripsi",name:"description",value:f.description,onChange:k}))))},v=()=>{const a=(0,e.useCallback)(async()=>{const[e,a]=await Promise.all([u.get("users"),u.get("jamaah")]);return{users:e,jamaah:a}},[]),{list:l,dependencies:d,isLoading:E,error:b,successMessage:y,isModalOpen:h,isEditing:f,formState:k,handleChange:v,handleAddNew:x,handleEdit:_,handleCloseModal:N,handleSubmit:w,handleDelete:C}=g("tasks",{title:"",description:"",assigned_to_user_id:"",jamaah_id:"",due_date:"",status:"pending",priority:"medium"},a),S=[{key:"title",label:"Judul Tugas"},{key:"assigned_to",label:"Ditugaskan Kepada",render:e=>d.users?.find(a=>a.id==e.assigned_to_user_id)?.full_name||"N/A"},{key:"jamaah",label:"Terkait Jemaah",render:e=>d.jamaah?.find(a=>a.id==e.jamaah_id)?.full_name||"N/A"},{key:"due_date",label:"Batas Waktu",render:e=>t(e.due_date)},{key:"priority",label:"Prioritas"},{key:"status",label:"Status"}];return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,e.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Tugas"),(0,e.createElement)(o,{onClick:x},"Tambah Tugas Baru")),(0,e.createElement)(c,{message:b,type:"error"}),(0,e.createElement)(c,{message:y,type:"success"}),E?(0,e.createElement)(i,null):(0,e.createElement)(p,{columns:S,data:l,onEdit:_,onDelete:C}),(0,e.createElement)(m,{show:h,onClose:N,title:f?"Edit Tugas":"Tambah Tugas Baru",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:N,variant:"secondary",className:"mr-2"},"Batal"),(0,e.createElement)(o,{onClick:w,type:"submit",form:"task-form"},"Simpan"))},(0,e.createElement)("form",{id:"task-form",onSubmit:w},(0,e.createElement)(n,{label:"Judul Tugas",name:"title",value:k.title,onChange:v,required:!0}),(0,e.createElement)(r,{label:"Deskripsi",name:"description",value:k.description,onChange:v}),(0,e.createElement)(s,{label:"Tugaskan Kepada",name:"assigned_to_user_id",value:k.assigned_to_user_id,onChange:v},(0,e.createElement)("option",{value:""},"Pilih Staff"),d.users?.map(a=>(0,e.createElement)("option",{key:a.id,value:a.id},a.full_name))),(0,e.createElement)(s,{label:"Terkait Jemaah (Opsional)",name:"jamaah_id",value:k.jamaah_id,onChange:v},(0,e.createElement)("option",{value:""},"Pilih Jemaah"),d.jamaah?.map(a=>(0,e.createElement)("option",{key:a.id,value:a.id},a.full_name))),(0,e.createElement)(n,{label:"Batas Waktu",name:"due_date",type:"date",value:t(k.due_date),onChange:v}),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(s,{label:"Prioritas",name:"priority",value:k.priority,onChange:v},(0,e.createElement)("option",{value:"low"},"Rendah"),(0,e.createElement)("option",{value:"medium"},"Sedang"),(0,e.createElement)("option",{value:"high"},"Tinggi")),(0,e.createElement)(s,{label:"Status",name:"status",value:k.status,onChange:v},(0,e.createElement)("option",{value:"pending"},"Pending"),(0,e.createElement)("option",{value:"in_progress"},"In Progress"),(0,e.createElement)("option",{value:"completed"},"Completed"))))))},x=()=>{const a=(0,e.useCallback)(async()=>({roles:await u.get("roles")}),[]),{list:t,dependencies:l,isLoading:r,error:d,successMessage:E,isModalOpen:b,isEditing:y,formState:h,handleChange:f,handleAddNew:k,handleEdit:v,handleCloseModal:x,handleSubmit:_,handleDelete:N}=g("users",{wp_user_id:"",email:"",full_name:"",role:"agent",phone:"",status:"active",password:""},a),w=[{key:"full_name",label:"Nama Lengkap"},{key:"email",label:"Email (WP Login)"},{key:"role",label:"Role",render:e=>l.roles?.find(a=>a.role_key===e.role)?.role_name||e.role},{key:"phone",label:"Telepon"},{key:"status",label:"Status"}];return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,e.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Pengguna (Staff)"),(0,e.createElement)(o,{onClick:k},"Tambah Staff Baru")),(0,e.createElement)(c,{message:d,type:"error"}),(0,e.createElement)(c,{message:E,type:"success"}),r?(0,e.createElement)(i,null):(0,e.createElement)(p,{columns:w,data:t,onEdit:v,onDelete:N}),(0,e.createElement)(m,{show:b,onClose:x,title:y?"Edit Staff":"Tambah Staff Baru",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:x,variant:"secondary",className:"mr-2"},"Batal"),(0,e.createElement)(o,{onClick:_,type:"submit",form:"user-form"},"Simpan"))},(0,e.createElement)("form",{id:"user-form",onSubmit:_},(0,e.createElement)(n,{label:"Nama Lengkap",name:"full_name",value:h.full_name,onChange:f,required:!0}),(0,e.createElement)(n,{label:"Email (Login WP)",name:"email",type:"email",value:h.email,onChange:f,required:!0,disabled:y}),!y&&(0,e.createElement)(n,{label:"Password",name:"password",type:"password",value:h.password,onChange:f,required:!0}),(0,e.createElement)(n,{label:"Telepon",name:"phone",value:h.phone,onChange:f}),(0,e.createElement)(s,{label:"Role",name:"role",value:h.role,onChange:f,required:!0},(0,e.createElement)("option",{value:""},"Pilih Role"),l.roles?.map(a=>(0,e.createElement)("option",{key:a.id,value:a.role_key},a.role_name))),(0,e.createElement)(s,{label:"Status",name:"status",value:h.status,onChange:f},(0,e.createElement)("option",{value:"active"},"Active"),(0,e.createElement)("option",{value:"inactive"},"Inactive")))))},_=()=>{const{list:a,isLoading:t,error:l,successMessage:s,isModalOpen:d,isEditing:u,formState:E,handleChange:b,handleAddNew:y,handleEdit:h,handleCloseModal:f,handleSubmit:k,handleDelete:v}=g("categories",{name:"",description:""});return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,e.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Kategori Paket"),(0,e.createElement)(o,{onClick:y},"Tambah Kategori")),(0,e.createElement)(c,{message:l,type:"error"}),(0,e.createElement)(c,{message:s,type:"success"}),t?(0,e.createElement)(i,null):(0,e.createElement)(p,{columns:[{key:"name",label:"Nama Kategori"},{key:"description",label:"Deskripsi"}],data:a,onEdit:h,onDelete:v}),(0,e.createElement)(m,{show:d,onClose:f,title:u?"Edit Kategori":"Tambah Kategori",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:f,variant:"secondary",className:"mr-2"},"Batal"),(0,e.createElement)(o,{onClick:k,type:"submit",form:"category-form"},"Simpan"))},(0,e.createElement)("form",{id:"category-form",onSubmit:k},(0,e.createElement)(n,{label:"Nama Kategori",name:"name",value:E.name,onChange:b,required:!0}),(0,e.createElement)(r,{label:"Deskripsi",name:"description",value:E.description,onChange:b}))))},N=()=>{const{list:a,isLoading:t,error:l,successMessage:r,isModalOpen:s,isEditing:d,formState:u,handleChange:E,handleAddNew:b,handleEdit:y,handleCloseModal:h,handleSubmit:f,handleDelete:k}=g("flights",{airline:"",flight_number:"",departure_airport_code:"",arrival_airport_code:"",departure_time:"",arrival_time:"",cost_per_seat:0,total_seats:0}),v=[{key:"airline",label:"Maskapai"},{key:"flight_number",label:"No. Penerbangan"},{key:"departure_airport_code",label:"Dari"},{key:"arrival_airport_code",label:"Ke"},{key:"departure_time",label:"Waktu Berangkat",render:e=>new Date(e.departure_time).toLocaleString("id-ID")},{key:"total_seats",label:"Kapasitas"}];return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,e.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Data Pesawat"),(0,e.createElement)(o,{onClick:b},"Tambah Data Pesawat")),(0,e.createElement)(c,{message:l,type:"error"}),(0,e.createElement)(c,{message:r,type:"success"}),t?(0,e.createElement)(i,null):(0,e.createElement)(p,{columns:v,data:a,onEdit:y,onDelete:k}),(0,e.createElement)(m,{show:s,onClose:h,title:d?"Edit Data Pesawat":"Tambah Data Pesawat",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:h,variant:"secondary",className:"mr-2"},"Batal"),(0,e.createElement)(o,{onClick:f,type:"submit",form:"flight-form"},"Simpan"))},(0,e.createElement)("form",{id:"flight-form",onSubmit:f,className:"space-y-4"},(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Maskapai",name:"airline",value:u.airline,onChange:E,required:!0}),(0,e.createElement)(n,{label:"No. Penerbangan",name:"flight_number",value:u.flight_number,onChange:E,required:!0})),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Kode Airport (Berangkat)",name:"departure_airport_code",value:u.departure_airport_code,onChange:E,required:!0,placeholder:"e.g., JED"}),(0,e.createElement)(n,{label:"Kode Airport (Tiba)",name:"arrival_airport_code",value:u.arrival_airport_code,onChange:E,required:!0,placeholder:"e.g., CGK"})),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Waktu Berangkat",name:"departure_time",type:"datetime-local",value:u.departure_time,onChange:E,required:!0}),(0,e.createElement)(n,{label:"Waktu Tiba",name:"arrival_time",type:"datetime-local",value:u.arrival_time,onChange:E,required:!0})),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Biaya per Kursi",name:"cost_per_seat",type:"number",value:u.cost_per_seat,onChange:E}),(0,e.createElement)(n,{label:"Total Kursi",name:"total_seats",type:"number",value:u.total_seats,onChange:E})))))},w=()=>{const{list:a,isLoading:t,error:l,successMessage:s,isModalOpen:d,isEditing:u,formState:E,handleChange:b,handleAddNew:y,handleEdit:h,handleCloseModal:f,handleSubmit:k,handleDelete:v}=g("hotels",{name:"",address:"",city:"Mekkah",country:"Saudi Arabia",phone:"",email:"",rating:5});return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,e.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Data Hotel"),(0,e.createElement)(o,{onClick:y},"Tambah Data Hotel")),(0,e.createElement)(c,{message:l,type:"error"}),(0,e.createElement)(c,{message:s,type:"success"}),t?(0,e.createElement)(i,null):(0,e.createElement)(p,{columns:[{key:"name",label:"Nama Hotel"},{key:"city",label:"Kota"},{key:"rating",label:"Bintang",render:e=>`${e.rating} Bintang`},{key:"phone",label:"Telepon"}],data:a,onEdit:h,onDelete:v}),(0,e.createElement)(m,{show:d,onClose:f,title:u?"Edit Data Hotel":"Tambah Data Hotel",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:f,variant:"secondary",className:"mr-2"},"Batal"),(0,e.createElement)(o,{onClick:k,type:"submit",form:"hotel-form"},"Simpan"))},(0,e.createElement)("form",{id:"hotel-form",onSubmit:k,className:"space-y-4"},(0,e.createElement)(n,{label:"Nama Hotel",name:"name",value:E.name,onChange:b,required:!0}),(0,e.createElement)(r,{label:"Alamat",name:"address",value:E.address,onChange:b}),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,e.createElement)(n,{label:"Kota",name:"city",value:E.city,onChange:b}),(0,e.createElement)(n,{label:"Negara",name:"country",value:E.country,onChange:b}),(0,e.createElement)(n,{label:"Bintang (1-5)",name:"rating",type:"number",min:"1",max:"5",value:E.rating,onChange:b})),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,e.createElement)(n,{label:"Telepon",name:"phone",value:E.phone,onChange:b}),(0,e.createElement)(n,{label:"Email",name:"email",type:"email",value:E.email,onChange:b})))))},C=()=>{const{list:a,isLoading:t,error:l,successMessage:r,isModalOpen:s,isEditing:d,formState:u,handleChange:E,handleAddNew:b,handleEdit:y,handleCloseModal:h,handleSubmit:f,handleDelete:k}=g("roles",{role_key:"",role_name:""});return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,e.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Role Karyawan"),(0,e.createElement)(o,{onClick:b},"Tambah Role Baru")),(0,e.createElement)(c,{message:l,type:"error"}),(0,e.createElement)(c,{message:r,type:"success"}),t?(0,e.createElement)(i,null):(0,e.createElement)(p,{columns:[{key:"role_name",label:"Nama Role"},{key:"role_key",label:"Kunci Role (untuk sistem)"}],data:a,onEdit:y,onDelete:k}),(0,e.createElement)(m,{show:s,onClose:h,title:d?"Edit Role":"Tambah Role Baru",footer:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{onClick:h,variant:"secondary",className:"mr-2"},"Batal"),(0,e.createElement)(o,{onClick:f,type:"submit",form:"role-form"},"Simpan"))},(0,e.createElement)("form",{id:"role-form",onSubmit:f},(0,e.createElement)(n,{label:"Nama Role",name:"role_name",value:u.role_name,onChange:E,required:!0,placeholder:"e.g., Staf Keuangan"}),(0,e.createElement)(n,{label:"Kunci Role",name:"role_key",value:u.role_key,onChange:E,required:!0,placeholder:"e.g., finance_staff"}))))},S=({user:a,onLogout:t})=>(0,e.createElement)("header",{className:"bg-white shadow-md"},(0,e.createElement)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},(0,e.createElement)("div",{className:"flex justify-between items-center h-16"},(0,e.createElement)("div",{className:"flex-shrink-0"},(0,e.createElement)("span",{className:"text-2xl font-bold text-blue-600"},"Travel"),(0,e.createElement)("span",{className:"text-2xl font-bold text-gray-700"},"Manajemen")),(0,e.createElement)("div",{className:"text-sm text-gray-600"},"Selamat datang, ",(0,e.createElement)("span",{className:"font-medium text-gray-800"},a.name||"Pengguna"))))),T=({currentView:a,setView:t})=>(0,e.createElement)("nav",{className:"bg-white shadow-sm"},(0,e.createElement)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},(0,e.createElement)("div",{className:"flex space-x-6"},[{key:"dashboard",label:"Dashboard"},{key:"packages",label:"Paket"},{key:"categories",label:"Kategori Paket"},{key:"jamaah",label:"Jemaah (Manifest)"},{key:"finance",label:"Keuangan"},{key:"tasks",label:"Tugas"},{key:"data_master",label:"Data Master",subItems:[{key:"flights",label:"Data Pesawat"},{key:"hotels",label:"Data Hotel"}]},{key:"hr",label:"HRD",subItems:[{key:"users",label:"Staff"},{key:"roles",label:"Roles"}]}].map(l=>l.subItems?(0,e.createElement)(P,{key:l.key,item:l,currentView:a,setView:t}):(0,e.createElement)(D,{key:l.key,item:l,isActive:a===l.key,onClick:()=>t(l.key)}))))),D=({item:a,isActive:t,onClick:l})=>(0,e.createElement)("button",{onClick:l,className:"px-3 py-4 text-sm font-medium border-b-2 transition-all duration-150\n            "+(t?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:border-gray-300 hover:text-gray-800")},a.label),P=({item:a,currentView:t,setView:l})=>{const[n,r]=(0,e.useState)(!1),s=a.subItems.some(e=>e.key===t);return(0,e.createElement)("div",{className:"relative",onMouseLeave:()=>r(!1)},(0,e.createElement)("button",{onMouseEnter:()=>r(!0),className:"px-3 py-4 text-sm font-medium border-b-2 transition-all duration-150 flex items-center\n                    "+(s?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:border-gray-300 hover:text-gray-800")},a.label,(0,e.createElement)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,e.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"}))),n&&(0,e.createElement)("div",{className:"absolute z-10 top-full left-0 mt-0 w-48 bg-white shadow-lg rounded-md border border-gray-200 py-1"},a.subItems.map(a=>(0,e.createElement)("button",{key:a.key,onClick:()=>{l(a.key),r(!1)},className:"block w-full text-left px-4 py-2 text-sm \n                                "+(t===a.key?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-100")},a.label))))},j=()=>{const[a,t]=(0,e.useState)("dashboard"),[l,n]=(0,e.useState)(d.user);return(0,e.createElement)("div",{className:"min-h-screen bg-gray-100"},(0,e.createElement)(S,{user:l}),(0,e.createElement)(T,{currentView:a,setView:t}),(0,e.createElement)("main",null,(0,e.createElement)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},(0,e.createElement)("div",{className:"bg-white p-6 rounded-lg shadow-lg"},(()=>{switch(a){case"dashboard":default:return(0,e.createElement)(E,null);case"packages":return(0,e.createElement)(y,null);case"jamaah":return(0,e.createElement)(h,null);case"finance":return(0,e.createElement)(k,null);case"tasks":return(0,e.createElement)(v,null);case"users":return(0,e.createElement)(x,null);case"categories":return(0,e.createElement)(_,null);case"flights":return(0,e.createElement)(N,null);case"hotels":return(0,e.createElement)(w,null);case"roles":return(0,e.createElement)(C,null)}})()))))};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("umh-react-app");t&&(0,a.render)((0,e.createElement)(j,null),t)})})();