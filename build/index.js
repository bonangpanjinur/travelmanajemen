(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var l in t)e.o(t,l)&&!e.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:t[l]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.React;var t=e.n(a);const l=window.ReactDOM;var n=e.n(l),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const s=(e,t)=>{const l=(0,a.forwardRef)(({color:l="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:m="",children:i,...c},d)=>{return(0,a.createElement)("svg",{ref:d,...r,width:n,height:n,stroke:l,strokeWidth:o?24*Number(s)/Number(n):s,className:["lucide",`lucide-${u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,m].join(" "),...c},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(i)?i:[i]]);var u});return l.displayName=`${e}`,l},o=s("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),m=s("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),i=s("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),c=s("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),d=e=>{if(!e)return"";try{const a=new Date(e);return isNaN(a.getTime())?"":a.toISOString().split("T")[0]}catch(e){return""}},u=e=>null==e?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),p=({label:e,type:t="text",name:l,value:n,onChange:r,required:s=!1,...o})=>(0,a.createElement)("div",{className:"mb-4"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:l},e," ",s&&(0,a.createElement)("span",{className:"text-red-500"},"*")),(0,a.createElement)("input",{type:t,id:l,name:l,value:n||"",onChange:r,required:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",...o})),g=({label:e,name:t,value:l,onChange:n,...r})=>(0,a.createElement)("div",{className:"mb-4"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:t},e),(0,a.createElement)("textarea",{id:t,name:t,value:l||"",onChange:n,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",...r})),h=({label:e,name:t,value:l,onChange:n,children:r,required:s=!1,...o})=>(0,a.createElement)("div",{className:"mb-4"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:t},e," ",s&&(0,a.createElement)("span",{className:"text-red-500"},"*")),(0,a.createElement)("select",{id:t,name:t,value:l||"",onChange:n,required:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white",...o},r)),b=({show:e,onClose:t,title:l,children:n,footer:r})=>e?(0,a.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300"},(0,a.createElement)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col transition-transform duration-300 transform scale-95 opacity-0 animate-modal-in"},(0,a.createElement)("div",{className:"flex justify-between items-center p-5 border-b"},(0,a.createElement)("h3",{className:"text-lg font-semibold text-gray-800"},l),(0,a.createElement)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors"},(0,a.createElement)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))),(0,a.createElement)("div",{className:"p-6 overflow-y-auto"},n),(0,a.createElement)("div",{className:"flex justify-end items-center p-5 border-t bg-gray-50 rounded-b-lg"},r))):null,y=({onClick:e,children:t,variant:l="primary",type:n="button",...r})=>(0,a.createElement)("button",{type:n,onClick:e,className:`px-4 py-2 rounded-md font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 ${{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500"}[l]}`,...r},t),E=()=>(0,a.createElement)("div",{className:"flex justify-center items-center h-64"},(0,a.createElement)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})),f=({message:e,type:t="error"})=>e?(0,a.createElement)("div",{className:`border px-4 py-3 rounded-md my-4 ${{error:"bg-red-100 border-red-400 text-red-700",success:"bg-green-100 border-green-400 text-green-700"}[t]}`,role:"alert"},(0,a.createElement)("span",{className:"block sm:inline"},e)):null,k=window.umh_wp_data||{api_url:"/wp-json/umh/v1/",nonce:"",user:{token:""}},v={getToken:()=>k.user?k.user.token:null,request:async(e,a="GET",t=null)=>{const l={method:a,headers:{"Content-Type":"application/json",Authorization:`Bearer ${v.getToken()}`}};t&&(l.body=JSON.stringify(t));try{const a=await fetch(k.api_url+e,l);if(204===a.status)return{success:!0};const t=await a.json();if(!a.ok)throw new Error(t.message||`Error ${a.status}: ${a.statusText}`);return t}catch(t){throw console.error(`API Error (${a} ${e}):`,t),t}},get:e=>v.request(e,"GET"),post:(e,a)=>v.request(e,"POST",a),put:(e,a)=>v.request(e,"PUT",a),del:e=>v.request(e,"DELETE")},x=(e,t,l)=>{const[n,r]=(0,a.useState)([]),[s,o]=(0,a.useState)({}),[m,i]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,p]=(0,a.useState)(!1),[g,h]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null),[E,f]=(0,a.useState)(t),[k,x]=(0,a.useState)(null),_=e=>{x(e),setTimeout(()=>x(null),3e3)},w=(0,a.useCallback)(async()=>{if(l)try{const e=await l();o(e||{})}catch(e){d(`Gagal memuat data pendukung: ${e.message}`)}},[l]),N=(0,a.useCallback)(async()=>{i(!0),d(null);try{await w();const a=await v.get(e);r(a)}catch(a){d(`Gagal memuat data ${e}: ${a.message}`)}finally{i(!1)}},[e,w]);(0,a.useEffect)(()=>{N()},[N]);const C=()=>{p(!1),d(null)};return{list:n,dependencies:s,isLoading:m,error:c,successMessage:k,isModalOpen:u,isEditing:g,currentItem:b,formState:E,handleChange:e=>{const{name:a,value:t,type:l,checked:n}=e.target;f(e=>({...e,[a]:"checkbox"===l?n:t}))},handleAddNew:()=>{h(!1),y(null),f(t),p(!0)},handleEdit:e=>{h(!0),y(e),f(e),p(!0)},handleCloseModal:C,handleSubmit:async a=>{a.preventDefault(),d(null);try{let a;g?(a=await v.put(`${e}/${b.id}`,E),_("Data berhasil diperbarui.")):(a=await v.post(e,E),_("Data berhasil ditambahkan.")),N(),C()}catch(e){d(`Gagal menyimpan: ${e.message}`)}},handleDelete:async a=>{if(window.confirm("Apakah Anda yakin ingin menghapus data ini?")){d(null);try{await v.del(`${e}/${a}`),_("Data berhasil dihapus."),N()}catch(e){d(`Gagal menghapus: ${e.message}`)}}},fetchData:N,setError:d,setFormState:f,fetchDependencies:w}},_=({columns:e,data:t,onEdit:l,onDelete:n})=>(0,a.createElement)("div",{className:"overflow-x-auto shadow-md rounded-lg"},(0,a.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,a.createElement)("thead",{className:"bg-gray-100"},(0,a.createElement)("tr",null,e.map(e=>(0,a.createElement)("th",{key:e.key,className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},e.label)),(0,a.createElement)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Aksi"))),(0,a.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===t.length?(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:e.length+1,className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data.")):t.map(t=>(0,a.createElement)("tr",{key:t.id,className:"hover:bg-gray-50"},e.map(e=>(0,a.createElement)("td",{key:e.key,className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800"},e.render?e.render(t):t[e.key])),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},(0,a.createElement)("button",{onClick:()=>l(t),className:"text-blue-600 hover:text-blue-800 mr-3"},"Edit"),(0,a.createElement)("button",{onClick:()=>n(t.id),className:"text-red-600 hover:text-red-800"},"Hapus"))))))),w=({title:e,value:l,icon:n,colorClass:r})=>(0,a.createElement)("div",{className:`bg-white p-6 rounded-lg shadow-lg border-l-4 ${r.replace("text","border")} flex items-center space-x-4 transition-all hover:shadow-xl`},(0,a.createElement)("div",{className:`p-3 rounded-full ${r} ${r.replace("text","bg")}/10`},t().cloneElement(n,{className:`w-6 h-6 ${r}`})),(0,a.createElement)("div",null,(0,a.createElement)("h3",{className:"text-sm font-medium text-gray-500 uppercase"},e),(0,a.createElement)("p",{className:"mt-1 text-3xl font-semibold text-gray-900"},l))),N=()=>{const[e,t]=(0,a.useState)(null),[l,n]=(0,a.useState)(!0),[r,s]=(0,a.useState)(null);if((0,a.useEffect)(()=>{(async()=>{try{n(!0);const e=await v.get("stats/totals");t(e)}catch(e){s(e.message)}finally{n(!1)}})()},[]),l)return(0,a.createElement)(E,null);if(r)return(0,a.createElement)(f,{message:`Gagal memuat statistik: ${r}`});const{total_jamaah:d,total_packages:p,total_revenue:g}=e||{},h=e?.total_jamaah_lunas||0;return(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},(0,a.createElement)(w,{title:"Total Jemaah",value:d||0,icon:(0,a.createElement)(o,null),colorClass:"text-blue-600"}),(0,a.createElement)(w,{title:"Total Paket",value:p||0,icon:(0,a.createElement)(m,null),colorClass:"text-indigo-600"}),(0,a.createElement)(w,{title:"Total Pemasukan",value:u(g||0),icon:(0,a.createElement)(i,null),colorClass:"text-green-600"}),(0,a.createElement)(w,{title:"Jemaah Lunas",value:h,icon:(0,a.createElement)(c,null),colorClass:"text-teal-600"}))},C=()=>{const e=(0,a.useCallback)(async()=>{const[e,a,t]=await Promise.all([v.get("categories"),v.get("flights"),v.get("hotels")]);return{categories:e,flights:a,hotels:t}},[]),{list:t,dependencies:l,isLoading:n,error:r,successMessage:s,isModalOpen:o,isEditing:m,formState:i,setFormState:c,handleChange:k,handleAddNew:w,handleCloseModal:N,handleSubmit:C,handleDelete:S}=x("packages",{name:"",category_id:"",description:"",departure_date:"",duration_days:0,status:"draft",prices:[{room_type:"Quad",price:0}],flight_ids:[],hotel_bookings:[]},e),T=(e,a,t)=>{const l=[...i.prices];l[e][a]=t,c(e=>({...e,prices:l}))},D=(e,a,t)=>{const l=[...i.hotel_bookings];l[e][a]=t,c(e=>({...e,hotel_bookings:l}))},P=[{key:"name",label:"Nama Paket"},{key:"category",label:"Kategori",render:e=>l.categories?.find(a=>a.id==e.category_id)?.name||"N/A"},{key:"price",label:"Harga",render:e=>{if(!e.prices||0===e.prices.length)return"Rp 0";const a=Math.min(...e.prices.map(e=>e.price));return`Mulai dari ${u(a)}`}},{key:"departure_date",label:"Keberangkatan",render:e=>d(e.departure_date)},{key:"duration_days",label:"Durasi (Hari)"},{key:"status",label:"Status"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Paket"),(0,a.createElement)(y,{onClick:w},"Tambah Paket Baru")),(0,a.createElement)(f,{message:r,type:"error"}),(0,a.createElement)(f,{message:s,type:"success"}),n?(0,a.createElement)(E,null):(0,a.createElement)(_,{columns:P,data:t,onEdit:e=>{setIsEditing(!0),setCurrentItem(e),c({...e,prices:e.prices||[],flight_ids:e.flight_ids||[],hotel_bookings:e.hotel_bookings||[]}),setModalOpen(!0)},onDelete:S}),(0,a.createElement)(b,{show:o,onClose:N,title:m?"Edit Paket":"Tambah Paket Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:N,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(y,{onClick:C,type:"submit",form:"package-form"},"Simpan"))},(0,a.createElement)("form",{id:"package-form",onSubmit:C},(0,a.createElement)(p,{label:"Nama Paket",name:"name",value:i.name,onChange:k,required:!0}),(0,a.createElement)(h,{label:"Kategori",name:"category_id",value:i.category_id,onChange:k,required:!0},(0,a.createElement)("option",{value:""},"Pilih Kategori"),l.categories?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.name))),(0,a.createElement)(g,{label:"Deskripsi",name:"description",value:i.description,onChange:k}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Tanggal Keberangkatan",name:"departure_date",type:"date",value:d(i.departure_date),onChange:k,required:!0}),(0,a.createElement)(p,{label:"Durasi (hari)",name:"duration_days",type:"number",value:i.duration_days,onChange:k,required:!0})),(0,a.createElement)(h,{label:"Status",name:"status",value:i.status,onChange:k,required:!0},(0,a.createElement)("option",{value:"draft"},"Draft"),(0,a.createElement)("option",{value:"published"},"Published"),(0,a.createElement)("option",{value:"archived"},"Archived")),(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700 mb-3"},"Harga Dinamis"),i.prices.map((e,t)=>(0,a.createElement)("div",{key:t,className:"flex items-center gap-2 mb-2"},(0,a.createElement)("input",{type:"text",placeholder:"Tipe Kamar (e.g., Quad)",value:e.room_type,onChange:e=>T(t,"room_type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),(0,a.createElement)("input",{type:"number",placeholder:"Harga",value:e.price,onChange:e=>T(t,"price",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),(0,a.createElement)(y,{type:"button",variant:"danger",onClick:()=>(e=>{const a=i.prices.filter((a,t)=>t!==e);c(e=>({...e,prices:a}))})(t)},"X"))),(0,a.createElement)(y,{type:"button",variant:"outline",onClick:()=>{c(e=>({...e,prices:[...e.prices,{room_type:"",price:0}]}))}},"+ Tambah Harga")),(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700 mb-1"},"Link Pesawat"),(0,a.createElement)("p",{className:"text-sm text-gray-500 mb-3"},"Tahan Ctrl/Cmd untuk memilih lebih dari satu."),(0,a.createElement)("select",{multiple:!0,name:"flight_ids",value:i.flight_ids,onChange:e=>{const a=Array.from(e.target.selectedOptions,e=>parseInt(e.value));c(e=>({...e,flight_ids:a}))},className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm"},l.flights?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.airline," (",e.flight_number,") - ",e.departure_airport_code," ke ",e.arrival_airport_code)))),(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700 mb-3"},"Link Hotel"),i.hotel_bookings.map((e,t)=>(0,a.createElement)("div",{key:t,className:"grid grid-cols-3 gap-2 mb-2 p-2 border rounded"},(0,a.createElement)("select",{value:e.hotel_id,onChange:e=>D(t,"hotel_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"},(0,a.createElement)("option",{value:""},"Pilih Hotel"),l.hotels?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.name," (",e.city,")"))),(0,a.createElement)("input",{type:"date",placeholder:"Check-in",value:d(e.check_in_date),onChange:e=>D(t,"check_in_date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),(0,a.createElement)("div",{className:"flex"},(0,a.createElement)("input",{type:"date",placeholder:"Check-out",value:d(e.check_out_date),onChange:e=>D(t,"check_out_date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),(0,a.createElement)(y,{type:"button",variant:"danger",onClick:()=>(e=>{const a=i.hotel_bookings.filter((a,t)=>t!==e);c(e=>({...e,hotel_bookings:a}))})(t),className:"ml-2"},"X")))),(0,a.createElement)(y,{type:"button",variant:"outline",onClick:()=>{c(e=>({...e,hotel_bookings:[...e.hotel_bookings,{hotel_id:"",check_in_date:"",check_out_date:""}]}))}},"+ Tambah Hotel")))))},S=()=>{const e=(0,a.useCallback)(async()=>({packages:await v.get("packages")}),[]),{list:t,dependencies:l,isLoading:n,error:r,successMessage:s,isModalOpen:o,isEditing:m,currentItem:i,formState:c,handleChange:w,handleAddNew:N,handleCloseModal:C,handleSubmit:S,handleDelete:D,fetchData:P,setError:M,setFormState:j}=x("jamaah",{full_name:"",package_id:"",birth_date:"",gender:"Laki-laki",address:"",phone:"",email:"",passport_number:"",passport_expiry:"",ktp_number:"",room_type:"Quad",total_price:0,status:"pending",notes:""},e),[B,q]=(0,a.useState)(null),[$,A]=(0,a.useState)(null),[L,K]=(0,a.useState)([]),[F,H]=(0,a.useState)(!1),[J,O]=(0,a.useState)(null),[R,I]=(0,a.useState)(!1),[G,U]=(0,a.useState)(null),W=async(e,a,t)=>{if(!e)return;const l=new FormData;l.append("file",e),l.append("jamaah_id",t),l.append("upload_type",a);try{const e=v.getToken(),t=await fetch(`${k.api_url}uploads`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:l});if(!t.ok){const e=await t.json();throw new Error(e.message||"Upload gagal")}const n=await t.json();j(e=>({...e,[a]:n.file_url})),P(),"ktp_scan"===a&&q(null),"passport_scan"===a&&A(null)}catch(e){M(`Upload ${a} gagal: ${e.message}`)}},V=async e=>{if(e){I(!0),U(null);try{const a=await v.get(`payments?jamaah_id=${e}`);K(a)}catch(e){U(`Gagal memuat pembayaran: ${e.message}`)}finally{I(!1)}}},z=()=>{C(),K([]),U(null),q(null),A(null)},Q=(e=null)=>{O(e),H(!0)},X=()=>{O(null),H(!1),U(null)},Z=[{key:"full_name",label:"Nama Jemaah"},{key:"package",label:"Paket",render:e=>l.packages?.find(a=>a.id==e.package_id)?.name||"N/A"},{key:"phone",label:"Telepon"},{key:"email",label:"Email"},{key:"payment_status",label:"Status Bayar",render:e=>{const t=e.payment_status||"Belum Lunas";return(0,a.createElement)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{Lunas:"bg-green-100 text-green-800",Cicil:"bg-yellow-100 text-yellow-800","Belum Lunas":"bg-red-100 text-red-800"}[t]}`},t)}},{key:"amount_paid",label:"Total Bayar",render:e=>u(e.amount_paid)},{key:"status",label:"Status Jemaah"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Jemaah (Manifest)"),(0,a.createElement)(y,{onClick:N},"Tambah Jemaah Baru")),(0,a.createElement)(f,{message:r,type:"error"}),(0,a.createElement)(f,{message:s,type:"success"}),n?(0,a.createElement)(E,null):(0,a.createElement)(_,{columns:Z,data:t,onEdit:e=>{handleEdit(e),V(e.id)},onDelete:D}),(0,a.createElement)(b,{show:o,onClose:z,title:m?"Edit Jemaah":"Tambah Jemaah Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:z,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(y,{onClick:S,type:"submit",form:"jamaah-form"},"Simpan Jemaah"))},(0,a.createElement)(f,{message:r,type:"error"}),(0,a.createElement)("form",{id:"jamaah-form",onSubmit:S,className:"space-y-4"},(0,a.createElement)(p,{label:"Nama Lengkap",name:"full_name",value:c.full_name,onChange:w,required:!0}),(0,a.createElement)(h,{label:"Paket",name:"package_id",value:c.package_id,onChange:w,required:!0},(0,a.createElement)("option",{value:""},"Pilih Paket"),l.packages?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.name," ",(e=>{if(!e.prices||0===e.prices.length)return"(Harga belum diatur)";const a=Math.min(...e.prices.map(e=>e.price));return`(Mulai dari ${u(a)})`})(e)))),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Tanggal Lahir",name:"birth_date",type:"date",value:d(c.birth_date),onChange:w}),(0,a.createElement)(h,{label:"Jenis Kelamin",name:"gender",value:c.gender,onChange:w},(0,a.createElement)("option",{value:"Laki-laki"},"Laki-laki"),(0,a.createElement)("option",{value:"Perempuan"},"Perempuan"))),(0,a.createElement)(g,{label:"Alamat",name:"address",value:c.address,onChange:w}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Telepon",name:"phone",value:c.phone,onChange:w,required:!0}),(0,a.createElement)(p,{label:"Email",name:"email",type:"email",value:c.email,onChange:w})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"No. KTP",name:"ktp_number",value:c.ktp_number,onChange:w}),(0,a.createElement)(p,{label:"No. Paspor",name:"passport_number",value:c.passport_number,onChange:w})),(0,a.createElement)(p,{label:"Tgl Kadaluarsa Paspor",name:"passport_expiry",type:"date",value:d(c.passport_expiry),onChange:w}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(h,{label:"Tipe Kamar",name:"room_type",value:c.room_type,onChange:w},(0,a.createElement)("option",{value:"Quad"},"Quad (4)"),(0,a.createElement)("option",{value:"Triple"},"Triple (3)"),(0,a.createElement)("option",{value:"Double"},"Double (2)")),(0,a.createElement)(p,{label:"Total Harga Paket",name:"total_price",type:"number",value:c.total_price,onChange:w,required:!0})),(0,a.createElement)(h,{label:"Status Jemaah",name:"status",value:c.status,onChange:w,required:!0},(0,a.createElement)("option",{value:"pending"},"Pending"),(0,a.createElement)("option",{value:"confirmed"},"Confirmed"),(0,a.createElement)("option",{value:"cancelled"},"Cancelled")),(0,a.createElement)(g,{label:"Catatan",name:"notes",value:c.notes,onChange:w}),m&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700 mb-3"},"Upload Dokumen"),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)("div",null,(0,a.createElement)(p,{label:`Upload KTP (File: ${c.ktp_scan?"Ada":"Kosong"})`,type:"file",onChange:e=>q(e.target.files[0])}),(0,a.createElement)(y,{type:"button",onClick:()=>W(B,"ktp_scan",i.id),disabled:!B,className:"mt-2",variant:"outline"},"Upload KTP")),(0,a.createElement)("div",null,(0,a.createElement)(p,{label:`Upload Paspor (File: ${c.passport_scan?"Ada":"Kosong"})`,type:"file",onChange:e=>A(e.target.files[0])}),(0,a.createElement)(y,{type:"button",onClick:()=>W($,"passport_scan",i.id),disabled:!$,className:"mt-2",variant:"outline"},"Upload Paspor")))),(0,a.createElement)("div",{className:"p-4 border border-gray-200 rounded-md mt-6"},(0,a.createElement)("div",{className:"flex justify-between items-center mb-3"},(0,a.createElement)("h4",{className:"font-semibold text-gray-700"},"Riwayat Pembayaran"),(0,a.createElement)(y,{type:"button",variant:"primary",onClick:()=>Q(null)},"Tambah Pembayaran")),(0,a.createElement)(f,{message:G,type:"error"}),R&&!L.length?(0,a.createElement)(E,null):(0,a.createElement)("div",{className:"max-h-60 overflow-y-auto"},(0,a.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,a.createElement)("thead",{className:"bg-gray-50"},(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Tgl"),(0,a.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Jumlah"),(0,a.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Tahap"),(0,a.createElement)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),(0,a.createElement)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,a.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===L.length?(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:"5",className:"text-center py-4 text-sm text-gray-500"},"Belum ada pembayaran.")):L.map(e=>(0,a.createElement)("tr",{key:e.id},(0,a.createElement)("td",{className:"px-3 py-2 text-sm"},d(e.payment_date)),(0,a.createElement)("td",{className:"px-3 py-2 text-sm"},u(e.amount)),(0,a.createElement)("td",{className:"px-3 py-2 text-sm"},e.payment_stage),(0,a.createElement)("td",{className:"px-3 py-2 text-sm"},(0,a.createElement)("span",{className:"px-2 py-0.5 rounded-full text-xs "+("verified"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800")},e.status)),(0,a.createElement)("td",{className:"px-3 py-2 text-sm text-right"},(0,a.createElement)("button",{type:"button",onClick:()=>Q(e),className:"text-blue-600 hover:text-blue-800 mr-2"},"Edit"),(0,a.createElement)("button",{type:"button",onClick:()=>(async e=>{if(window.confirm("Yakin ingin menghapus pembayaran ini?")){I(!0),U(null);try{await v.del(`payments/${e}`),await V(i.id),await P()}catch(e){U(`Gagal menghapus pembayaran: ${e.message}`)}finally{I(!1)}}})(e.id),className:"text-red-600 hover:text-red-800"},"Hapus"))))))))))),F&&(0,a.createElement)(T,{show:F,onClose:X,payment:J,onSave:async(e,a)=>{I(!0),U(null);try{let t;const l={...e,jamaah_id:i.id};t=J?await v.put(`payments/${J.id}`,l):await v.post("payments",l),a&&await(async(e,a)=>{const t=new FormData;t.append("file",a);const l=v.getToken(),n=await fetch(`${k.api_url}payments/${e}/upload_proof`,{method:"POST",headers:{Authorization:`Bearer ${l}`},body:t});if(!n.ok){const e=await n.json();throw new Error(e.message||"Upload bukti gagal")}})(t.id,a),await V(i.id),await P(),X()}catch(e){U(`Gagal menyimpan pembayaran: ${e.message}`)}finally{I(!1)}},isLoading:R,error:G}))},T=({show:e,onClose:t,payment:l,onSave:n,isLoading:r,error:s})=>{const[o,m]=(0,a.useState)({payment_date:d(new Date),amount:0,payment_stage:"DP 1",status:"pending",notes:"",proof_url:""}),[i,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{m(l?{payment_date:d(l.payment_date),amount:l.amount,payment_stage:l.payment_stage,status:l.status,notes:l.notes||"",proof_url:l.proof_url||""}:{payment_date:d(new Date),amount:0,payment_stage:"DP 1",status:"pending",notes:"",proof_url:""}),c(null)},[l,e]);const u=e=>{const{name:a,value:t}=e.target;m(e=>({...e,[a]:t}))},E=e=>{e.preventDefault(),n(o,i)};return(0,a.createElement)(b,{show:e,onClose:t,title:l?"Edit Pembayaran":"Tambah Pembayaran Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:t,variant:"secondary",className:"mr-2",disabled:r},"Batal"),(0,a.createElement)(y,{onClick:E,type:"submit",form:"payment-form",disabled:r},r?"Menyimpan...":"Simpan Pembayaran"))},(0,a.createElement)(f,{message:s,type:"error"}),(0,a.createElement)("form",{id:"payment-form",onSubmit:E,className:"space-y-4"},(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Tanggal Bayar",name:"payment_date",type:"date",value:o.payment_date,onChange:u,required:!0}),(0,a.createElement)(p,{label:"Jumlah Bayar",name:"amount",type:"number",value:o.amount,onChange:u,required:!0})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Tahap Pembayaran",name:"payment_stage",value:o.payment_stage,onChange:u,placeholder:"e.g., DP 1, Cicilan 2, Pelunasan"}),(0,a.createElement)(h,{label:"Status",name:"status",value:o.status,onChange:u,required:!0},(0,a.createElement)("option",{value:"pending"},"Pending"),(0,a.createElement)("option",{value:"verified"},"Verified"),(0,a.createElement)("option",{value:"rejected"},"Rejected"))),(0,a.createElement)(g,{label:"Catatan",name:"notes",value:o.notes,onChange:u}),(0,a.createElement)(p,{label:"Upload Bukti Pembayaran",type:"file",onChange:e=>{c(e.target.files[0])}}),o.proof_url&&(0,a.createElement)("p",{className:"text-sm text-gray-600"},"Bukti saat ini: ",(0,a.createElement)("a",{href:o.proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline"},"Lihat File"))))},D=()=>{const e={transaction_date:d(new Date),type:"expense",category:"",description:"",amount:0},{list:t,isLoading:l,error:n,successMessage:r,isModalOpen:s,isEditing:o,formState:m,handleChange:i,handleAddNew:c,handleEdit:k,handleCloseModal:v,handleSubmit:w,handleDelete:N}=x("finance",e),C=[{key:"transaction_date",label:"Tanggal",render:e=>d(e.transaction_date)},{key:"type",label:"Tipe",render:e=>(0,a.createElement)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("income"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},e.type)},{key:"category",label:"Kategori"},{key:"description",label:"Deskripsi"},{key:"amount",label:"Jumlah",render:e=>u(e.amount)}],S=(0,a.useMemo)(()=>t.reduce((e,a)=>"income"===a.type?e+parseFloat(a.amount):"expense"===a.type?e-parseFloat(a.amount):e,0),[t]);return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Keuangan"),(0,a.createElement)("div",{className:"flex items-center space-x-4"},(0,a.createElement)("div",{className:"text-right"},(0,a.createElement)("span",{className:"text-sm text-gray-500"},"Total Saldo"),(0,a.createElement)("p",{className:"text-xl font-semibold "+(S>=0?"text-green-600":"text-red-600")},u(S))),(0,a.createElement)(y,{onClick:c},"Tambah Transaksi"))),(0,a.createElement)(f,{message:n,type:"error"}),(0,a.createElement)(f,{message:r,type:"success"}),l?(0,a.createElement)(E,null):(0,a.createElement)(_,{columns:C,data:t,onEdit:k,onDelete:N}),(0,a.createElement)(b,{show:s,onClose:v,title:o?"Edit Transaksi":"Tambah Transaksi Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:v,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(y,{onClick:w,type:"submit",form:"finance-form"},"Simpan"))},(0,a.createElement)("form",{id:"finance-form",onSubmit:w},(0,a.createElement)(p,{label:"Tanggal",name:"transaction_date",type:"date",value:d(m.transaction_date),onChange:i,required:!0}),(0,a.createElement)(h,{label:"Tipe Transaksi",name:"type",value:m.type,onChange:i,required:!0},(0,a.createElement)("option",{value:"expense"},"Pengeluaran (Expense)"),(0,a.createElement)("option",{value:"income"},"Pemasukan (Income)")),(0,a.createElement)(p,{label:"Kategori",name:"category",value:m.category,onChange:i,placeholder:"e.g., Tiket Pesawat, Akomodasi, Gaji"}),(0,a.createElement)(p,{label:"Jumlah",name:"amount",type:"number",value:m.amount,onChange:i,required:!0}),(0,a.createElement)(g,{label:"Deskripsi",name:"description",value:m.description,onChange:i}))))},P=()=>{const e=(0,a.useCallback)(async()=>{const[e,a]=await Promise.all([v.get("users"),v.get("jamaah")]);return{users:e,jamaah:a}},[]),{list:t,dependencies:l,isLoading:n,error:r,successMessage:s,isModalOpen:o,isEditing:m,formState:i,handleChange:c,handleAddNew:u,handleEdit:k,handleCloseModal:w,handleSubmit:N,handleDelete:C}=x("tasks",{title:"",description:"",assigned_to_user_id:"",jamaah_id:"",due_date:"",status:"pending",priority:"medium"},e),S=[{key:"title",label:"Judul Tugas"},{key:"assigned_to",label:"Ditugaskan Kepada",render:e=>l.users?.find(a=>a.id==e.assigned_to_user_id)?.full_name||"N/A"},{key:"jamaah",label:"Terkait Jemaah",render:e=>l.jamaah?.find(a=>a.id==e.jamaah_id)?.full_name||"N/A"},{key:"due_date",label:"Batas Waktu",render:e=>d(e.due_date)},{key:"priority",label:"Prioritas"},{key:"status",label:"Status"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Tugas"),(0,a.createElement)(y,{onClick:u},"Tambah Tugas Baru")),(0,a.createElement)(f,{message:r,type:"error"}),(0,a.createElement)(f,{message:s,type:"success"}),n?(0,a.createElement)(E,null):(0,a.createElement)(_,{columns:S,data:t,onEdit:k,onDelete:C}),(0,a.createElement)(b,{show:o,onClose:w,title:m?"Edit Tugas":"Tambah Tugas Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:w,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(y,{onClick:N,type:"submit",form:"task-form"},"Simpan"))},(0,a.createElement)("form",{id:"task-form",onSubmit:N},(0,a.createElement)(p,{label:"Judul Tugas",name:"title",value:i.title,onChange:c,required:!0}),(0,a.createElement)(g,{label:"Deskripsi",name:"description",value:i.description,onChange:c}),(0,a.createElement)(h,{label:"Tugaskan Kepada",name:"assigned_to_user_id",value:i.assigned_to_user_id,onChange:c},(0,a.createElement)("option",{value:""},"Pilih Staff"),l.users?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.full_name))),(0,a.createElement)(h,{label:"Terkait Jemaah (Opsional)",name:"jamaah_id",value:i.jamaah_id,onChange:c},(0,a.createElement)("option",{value:""},"Pilih Jemaah"),l.jamaah?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.full_name))),(0,a.createElement)(p,{label:"Batas Waktu",name:"due_date",type:"date",value:d(i.due_date),onChange:c}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(h,{label:"Prioritas",name:"priority",value:i.priority,onChange:c},(0,a.createElement)("option",{value:"low"},"Rendah"),(0,a.createElement)("option",{value:"medium"},"Sedang"),(0,a.createElement)("option",{value:"high"},"Tinggi")),(0,a.createElement)(h,{label:"Status",name:"status",value:i.status,onChange:c},(0,a.createElement)("option",{value:"pending"},"Pending"),(0,a.createElement)("option",{value:"in_progress"},"In Progress"),(0,a.createElement)("option",{value:"completed"},"Completed"))))))},M=()=>{const e=(0,a.useCallback)(async()=>({roles:await v.get("roles")}),[]),{list:t,dependencies:l,isLoading:n,error:r,successMessage:s,isModalOpen:o,isEditing:m,formState:i,handleChange:c,handleAddNew:d,handleEdit:u,handleCloseModal:g,handleSubmit:k,handleDelete:w}=x("users",{email:"",full_name:"",role:"agent",phone:"",status:"active",password:""},e),N=[{key:"full_name",label:"Nama Lengkap"},{key:"email",label:"Email (Login)"},{key:"role",label:"Role",render:e=>l.roles?.find(a=>a.role_key===e.role)?.role_name||e.role},{key:"phone",label:"Telepon"},{key:"status",label:"Status"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Pengguna (Staff)"),(0,a.createElement)(y,{onClick:d},"Tambah Staff Baru")),(0,a.createElement)(f,{message:r,type:"error"}),(0,a.createElement)(f,{message:s,type:"success"}),n?(0,a.createElement)(E,null):(0,a.createElement)(_,{columns:N,data:t,onEdit:u,onDelete:w}),(0,a.createElement)(b,{show:o,onClose:g,title:m?"Edit Staff":"Tambah Staff Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:g,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(y,{onClick:k,type:"submit",form:"user-form"},"Simpan"))},(0,a.createElement)("form",{id:"user-form",onSubmit:k},(0,a.createElement)(p,{label:"Nama Lengkap",name:"full_name",value:i.full_name,onChange:c,required:!0}),(0,a.createElement)(p,{label:"Email (Untuk Login)",name:"email",type:"email",value:i.email,onChange:c,required:!0,disabled:m}),m?(0,a.createElement)(p,{label:"Password",name:"password",type:"password",value:i.password,onChange:c,placeholder:"Kosongkan jika tidak ingin mengubah"}):(0,a.createElement)(p,{label:"Password",name:"password",type:"password",value:i.password,onChange:c,required:!0}),(0,a.createElement)(p,{label:"Telepon",name:"phone",value:i.phone,onChange:c}),(0,a.createElement)(h,{label:"Role",name:"role",value:i.role,onChange:c,required:!0},(0,a.createElement)("option",{value:""},"Pilih Role"),l.roles?.map(e=>(0,a.createElement)("option",{key:e.id,value:e.role_key},e.role_name))),(0,a.createElement)(h,{label:"Status",name:"status",value:i.status,onChange:c},(0,a.createElement)("option",{value:"active"},"Active"),(0,a.createElement)("option",{value:"inactive"},"Inactive")))))},j=()=>{const{list:e,isLoading:t,error:l,successMessage:n,isModalOpen:r,isEditing:s,formState:o,handleChange:m,handleAddNew:i,handleEdit:c,handleCloseModal:d,handleSubmit:u,handleDelete:h}=x("categories",{name:"",description:""});return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Kategori Paket"),(0,a.createElement)(y,{onClick:i},"Tambah Kategori")),(0,a.createElement)(f,{message:l,type:"error"}),(0,a.createElement)(f,{message:n,type:"success"}),t?(0,a.createElement)(E,null):(0,a.createElement)(_,{columns:[{key:"name",label:"Nama Kategori"},{key:"description",label:"Deskripsi"}],data:e,onEdit:c,onDelete:h}),(0,a.createElement)(b,{show:r,onClose:d,title:s?"Edit Kategori":"Tambah Kategori",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:d,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(y,{onClick:u,type:"submit",form:"category-form"},"Simpan"))},(0,a.createElement)("form",{id:"category-form",onSubmit:u},(0,a.createElement)(p,{label:"Nama Kategori",name:"name",value:o.name,onChange:m,required:!0}),(0,a.createElement)(g,{label:"Deskripsi",name:"description",value:o.description,onChange:m}))))},B=()=>{const{list:e,isLoading:t,error:l,successMessage:n,isModalOpen:r,isEditing:s,formState:o,handleChange:m,handleAddNew:i,handleEdit:c,handleCloseModal:d,handleSubmit:u,handleDelete:g}=x("flights",{airline:"",flight_number:"",departure_airport_code:"",arrival_airport_code:"",departure_time:"",arrival_time:"",cost_per_seat:0,total_seats:0}),h=[{key:"airline",label:"Maskapai"},{key:"flight_number",label:"No. Penerbangan"},{key:"departure_airport_code",label:"Dari"},{key:"arrival_airport_code",label:"Ke"},{key:"departure_time",label:"Waktu Berangkat",render:e=>new Date(e.departure_time).toLocaleString("id-ID")},{key:"total_seats",label:"Kapasitas"}];return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Data Pesawat"),(0,a.createElement)(y,{onClick:i},"Tambah Data Pesawat")),(0,a.createElement)(f,{message:l,type:"error"}),(0,a.createElement)(f,{message:n,type:"success"}),t?(0,a.createElement)(E,null):(0,a.createElement)(_,{columns:h,data:e,onEdit:c,onDelete:g}),(0,a.createElement)(b,{show:r,onClose:d,title:s?"Edit Data Pesawat":"Tambah Data Pesawat",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:d,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(y,{onClick:u,type:"submit",form:"flight-form"},"Simpan"))},(0,a.createElement)("form",{id:"flight-form",onSubmit:u,className:"space-y-4"},(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Maskapai",name:"airline",value:o.airline,onChange:m,required:!0}),(0,a.createElement)(p,{label:"No. Penerbangan",name:"flight_number",value:o.flight_number,onChange:m,required:!0})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Kode Airport (Berangkat)",name:"departure_airport_code",value:o.departure_airport_code,onChange:m,required:!0,placeholder:"e.g., JED"}),(0,a.createElement)(p,{label:"Kode Airport (Tiba)",name:"arrival_airport_code",value:o.arrival_airport_code,onChange:m,required:!0,placeholder:"e.g., CGK"})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Waktu Berangkat",name:"departure_time",type:"datetime-local",value:o.departure_time,onChange:m,required:!0}),(0,a.createElement)(p,{label:"Waktu Tiba",name:"arrival_time",type:"datetime-local",value:o.arrival_time,onChange:m,required:!0})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Biaya per Kursi",name:"cost_per_seat",type:"number",value:o.cost_per_seat,onChange:m}),(0,a.createElement)(p,{label:"Total Kursi",name:"total_seats",type:"number",value:o.total_seats,onChange:m})))))},q=()=>{const{list:e,isLoading:t,error:l,successMessage:n,isModalOpen:r,isEditing:s,formState:o,handleChange:m,handleAddNew:i,handleEdit:c,handleCloseModal:d,handleSubmit:u,handleDelete:h}=x("hotels",{name:"",address:"",city:"Mekkah",country:"Saudi Arabia",phone:"",email:"",rating:5});return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Data Hotel"),(0,a.createElement)(y,{onClick:i},"Tambah Data Hotel")),(0,a.createElement)(f,{message:l,type:"error"}),(0,a.createElement)(f,{message:n,type:"success"}),t?(0,a.createElement)(E,null):(0,a.createElement)(_,{columns:[{key:"name",label:"Nama Hotel"},{key:"city",label:"Kota"},{key:"rating",label:"Bintang",render:e=>`${e.rating} Bintang`},{key:"phone",label:"Telepon"}],data:e,onEdit:c,onDelete:h}),(0,a.createElement)(b,{show:r,onClose:d,title:s?"Edit Data Hotel":"Tambah Data Hotel",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:d,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(y,{onClick:u,type:"submit",form:"hotel-form"},"Simpan"))},(0,a.createElement)("form",{id:"hotel-form",onSubmit:u,className:"space-y-4"},(0,a.createElement)(p,{label:"Nama Hotel",name:"name",value:o.name,onChange:m,required:!0}),(0,a.createElement)(g,{label:"Alamat",name:"address",value:o.address,onChange:m}),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,a.createElement)(p,{label:"Kota",name:"city",value:o.city,onChange:m}),(0,a.createElement)(p,{label:"Negara",name:"country",value:o.country,onChange:m}),(0,a.createElement)(p,{label:"Bintang (1-5)",name:"rating",type:"number",min:"1",max:"5",value:o.rating,onChange:m})),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,a.createElement)(p,{label:"Telepon",name:"phone",value:o.phone,onChange:m}),(0,a.createElement)(p,{label:"Email",name:"email",type:"email",value:o.email,onChange:m})))))},$=()=>{const{list:e,isLoading:t,error:l,successMessage:n,isModalOpen:r,isEditing:s,formState:o,handleChange:m,handleAddNew:i,handleEdit:c,handleCloseModal:d,handleSubmit:u,handleDelete:g}=x("roles",{role_key:"",role_name:""});return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,a.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Role Karyawan"),(0,a.createElement)(y,{onClick:i},"Tambah Role Baru")),(0,a.createElement)(f,{message:l,type:"error"}),(0,a.createElement)(f,{message:n,type:"success"}),t?(0,a.createElement)(E,null):(0,a.createElement)(_,{columns:[{key:"role_name",label:"Nama Role"},{key:"role_key",label:"Kunci Role (untuk sistem)"}],data:e,onEdit:c,onDelete:g}),(0,a.createElement)(b,{show:r,onClose:d,title:s?"Edit Role":"Tambah Role Baru",footer:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y,{onClick:d,variant:"secondary",className:"mr-2"},"Batal"),(0,a.createElement)(y,{onClick:u,type:"submit",form:"role-form"},"Simpan"))},(0,a.createElement)("form",{id:"role-form",onSubmit:u},(0,a.createElement)(p,{label:"Nama Role",name:"role_name",value:o.role_name,onChange:m,required:!0,placeholder:"e.g., Staf Keuangan"}),(0,a.createElement)(p,{label:"Kunci Role",name:"role_key",value:o.role_key,onChange:m,required:!0,placeholder:"e.g., finance_staff"}))))},A=({user:e,onLogout:t})=>(0,a.createElement)("header",{className:"bg-blue-700 text-white shadow-lg"},(0,a.createElement)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},(0,a.createElement)("div",{className:"flex justify-between items-center h-16"},(0,a.createElement)("div",{className:"flex-shrink-0"},(0,a.createElement)("span",{className:"text-2xl font-bold text-white"},"Travel"),(0,a.createElement)("span",{className:"text-2xl font-bold text-blue-200"},"Manajemen")),(0,a.createElement)("div",{className:"text-sm text-blue-100"},"Selamat datang, ",(0,a.createElement)("span",{className:"font-medium text-white"},e.name||"Pengguna"))))),L=({currentView:e,setView:t})=>(0,a.createElement)("nav",{className:"bg-white shadow-sm"},(0,a.createElement)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},(0,a.createElement)("div",{className:"flex space-x-6"},[{key:"dashboard",label:"Dashboard"},{key:"packages",label:"Paket"},{key:"categories",label:"Kategori Paket"},{key:"jamaah",label:"Jemaah (Manifest)"},{key:"finance",label:"Keuangan"},{key:"tasks",label:"Tugas"},{key:"data_master",label:"Data Master",subItems:[{key:"flights",label:"Data Pesawat"},{key:"hotels",label:"Data Hotel"}]},{key:"hr",label:"HRD",subItems:[{key:"users",label:"Staff"},{key:"roles",label:"Roles"}]}].map(l=>l.subItems?(0,a.createElement)(F,{key:l.key,item:l,currentView:e,setView:t}):(0,a.createElement)(K,{key:l.key,item:l,isActive:e===l.key,onClick:()=>t(l.key)}))))),K=({item:e,isActive:t,onClick:l})=>(0,a.createElement)("button",{onClick:l,className:"px-3 py-4 text-sm font-medium border-b-2 transition-all duration-150\n            "+(t?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:border-gray-300 hover:text-gray-800")},e.label),F=({item:e,currentView:t,setView:l})=>{const[n,r]=(0,a.useState)(!1),s=e.subItems.some(e=>e.key===t);return(0,a.createElement)("div",{className:"relative",onMouseLeave:()=>r(!1)},(0,a.createElement)("button",{onMouseEnter:()=>r(!0),className:"px-3 py-4 text-sm font-medium border-b-2 transition-all duration-150 flex items-center\n                    "+(s?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:border-gray-300 hover:text-gray-800")},e.label,(0,a.createElement)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,a.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"}))),n&&(0,a.createElement)("div",{className:"absolute z-10 top-full left-0 mt-0 w-48 bg-white shadow-lg rounded-md border border-gray-200 py-1"},e.subItems.map(e=>(0,a.createElement)("button",{key:e.key,onClick:()=>{l(e.key),r(!1)},className:"block w-full text-left px-4 py-2 text-sm \n                                "+(t===e.key?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-100")},e.label))))},H=()=>{const[e,t]=(0,a.useState)("dashboard"),[l,n]=(0,a.useState)(k.user);return(0,a.useEffect)(()=>{"super_admin"===k.user.role&&(async()=>{if(k.user&&k.user.token)try{await v.get("users/me"),n(k.user)}catch(e){console.warn("Token kadaluarsa, mencoba auto-login...");try{const e=await v.post("auth/wp-login",{});k.user.token=e.token,n(e.user)}catch(e){console.error("Auto-login gagal:",e),n({name:"Error",role:"guest",token:null})}}else if(k.user&&"super_admin"===k.user.role&&!k.user.token)try{console.log("Mencoba auto-login Super Admin...");const e=await v.post("auth/wp-login",{});k.user.token=e.token,n(e.user)}catch(e){console.error("Gagal auto-login Super Admin:",e)}})()},[]),(0,a.createElement)("div",{className:"min-h-screen bg-gray-100"},(0,a.createElement)(A,{user:l}),(0,a.createElement)(L,{currentView:e,setView:t}),(0,a.createElement)("main",null,(0,a.createElement)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},(0,a.createElement)("div",{className:"bg-white p-6 rounded-lg shadow-lg"},(()=>{switch(e){case"dashboard":default:return(0,a.createElement)(N,null);case"packages":return(0,a.createElement)(C,null);case"jamaah":return(0,a.createElement)(S,null);case"finance":return(0,a.createElement)(D,null);case"tasks":return(0,a.createElement)(P,null);case"users":return(0,a.createElement)(M,null);case"categories":return(0,a.createElement)(j,null);case"flights":return(0,a.createElement)(B,null);case"hotels":return(0,a.createElement)(q,null);case"roles":return(0,a.createElement)($,null)}})()))))};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("umh-react-app");e?n().render((0,a.createElement)(H,null),e):console.error("Target div 'umh-react-app' not found.")})})();