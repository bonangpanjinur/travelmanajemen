(()=>{"use strict";var e={338:(e,t,a)=>{var n=a(795);t.H=n.createRoot,n.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};const a=window.React;var n=function a(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}(338);const l=e=>{const t=async(t,a={})=>{const n=e(),l=window.umh_wp_data||{api_url:"/wp-json/umh/v1/",api_nonce:""},r={"Content-Type":"application/json",...a.headers};n&&(r.Authorization=`Bearer ${n}`),l.is_wp_admin&&l.api_nonce&&(r["X-WP-Nonce"]=l.api_nonce);const s=await fetch(`${l.api_url}${t}`,{...a,headers:r});if(204===s.status)return null;const m=await s.json();if(!s.ok)throw new Error(m.message||`Error ${s.status}`);return m};return{get:(e,a={})=>t(e,{...a,method:"GET"}),post:(e,a,n={})=>t(e,{...n,method:"POST",body:JSON.stringify(a)}),put:(e,a,n={})=>t(e,{...n,method:"PUT",body:JSON.stringify(a)}),del:(e,a={})=>t(e,{...a,method:"DELETE"})}},r=(0,a.createContext)(null),s=({children:e})=>{const[t,n]=(0,a.useState)(null),[s,m]=(0,a.useState)(()=>localStorage.getItem("umh_auth_token")),[o,i]=(0,a.useState)(!0),c=(0,a.useMemo)(()=>l(()=>s),[s]);(0,a.useEffect)(()=>{(async()=>{const e=window.umh_wp_data,t=localStorage.getItem("umh_auth_token");try{if(e&&e.is_wp_admin){console.log("Admin WP terdeteksi, mencoba auto-login...");try{const t=await fetch(`${e.api_url}auth/wp-login`,{method:"POST",headers:{"X-WP-Nonce":e.api_nonce,"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.message||"WP Admin auto-login gagal.")}const a=await t.json();console.log("WP Admin auto-login berhasil.",a),m(a.token),n(a.user),localStorage.setItem("umh_auth_token",a.token)}catch(e){console.error("WP Admin auto-login error:",e),localStorage.removeItem("umh_auth_token"),m(null),n(null)}}else if(t){console.log("Token lokal ditemukan, memverifikasi...");try{const e=l(()=>t),a=await e.get("users/me");console.log("Verifikasi token berhasil."),n(a),m(t)}catch(e){console.warn("Verifikasi token gagal:",e),localStorage.removeItem("umh_auth_token"),m(null),n(null)}}else console.log("Bukan admin & tidak ada token. Tampilkan login.")}catch(e){console.error("Bootstrap auth error:",e),localStorage.removeItem("umh_auth_token"),m(null),n(null)}finally{i(!1)}})()},[]);const u={user:t,token:s,isLoading:o,api:c,logout:()=>{console.log("Logout."),m(null),n(null),localStorage.removeItem("umh_auth_token")},login:e=>{console.log("Login kustom berhasil."),m(e.token),n(e.user),localStorage.setItem("umh_auth_token",e.token)}};return(0,a.createElement)(r.Provider,{value:u},e)},m=()=>{const e=(0,a.useContext)(r);if(null===e)throw new Error("useAuth harus digunakan di dalam AuthProvider");return e},o=({onLoginSuccess:e})=>{const[t,n]=(0,a.useState)(""),[l,r]=(0,a.useState)(""),[s,m]=(0,a.useState)(!1),[o,i]=(0,a.useState)(null),c=window.umh_wp_data||{api_url:"/wp-json/umh/v1/"};return(0,a.createElement)("div",{style:N.loginContainer},(0,a.createElement)("div",{style:N.loginBox},(0,a.createElement)("h2",{style:N.loginTitle},"Login Aplikasi"),(0,a.createElement)("p",{style:N.loginSubtitle},"Silakan masuk (Owner/Karyawan)"),(0,a.createElement)("form",{onSubmit:async a=>{a.preventDefault(),m(!0),i(null);try{const a=await fetch(`${c.api_url}users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:l})}),n=await a.json();if(!a.ok)throw new Error(n.message||"Login gagal.");e(n)}catch(e){i(e.message),m(!1)}}},(0,a.createElement)("div",{style:N.inputGroup},(0,a.createElement)("label",{htmlFor:"email",style:N.label},"Email"),(0,a.createElement)("input",{type:"email",id:"email",style:N.input,value:t,onChange:e=>n(e.target.value),required:!0})),(0,a.createElement)("div",{style:N.inputGroup},(0,a.createElement)("label",{htmlFor:"password",style:N.label},"Password"),(0,a.createElement)("input",{type:"password",id:"password",style:N.input,value:l,onChange:e=>r(e.target.value),required:!0})),o&&(0,a.createElement)("p",{style:N.error},o),(0,a.createElement)("button",{type:"submit",style:N.button,disabled:s},s?"Loading...":"Login"))))},i=({show:e,onClose:t,title:n,children:l})=>e?(0,a.createElement)("div",{className:"fixed inset-0 z-50 flex justify-center items-center p-4","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},(0,a.createElement)("div",{className:"fixed inset-0 bg-black bg-opacity-50","aria-hidden":"true",onClick:t}),(0,a.createElement)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col relative z-10"},(0,a.createElement)("div",{className:"flex justify-between items-center p-5 border-b"},(0,a.createElement)("h3",{id:"modal-title",className:"text-xl font-semibold text-gray-900"},n),(0,a.createElement)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600"},(0,a.createElement)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,a.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))),(0,a.createElement)("div",{className:"p-6 overflow-y-auto"},l))):null,c=({label:e,value:t,onChange:n,type:l="text",required:r=!1,...s})=>(0,a.createElement)("div",null,(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-700"},e),(0,a.createElement)("input",{type:l,value:t,onChange:n,required:r,...s,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),u=({label:e,value:t,onChange:n,...l})=>(0,a.createElement)("div",null,(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-700"},e),(0,a.createElement)("textarea",{value:t,onChange:n,...l,rows:"3",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),d=({label:e,value:t,onChange:n,children:l,...r})=>(0,a.createElement)("div",null,(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-700"},e),(0,a.createElement)("select",{value:t,onChange:n,...r,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},l)),p=({title:e,value:t})=>(0,a.createElement)("div",{className:"bg-white p-6 rounded-lg shadow"},(0,a.createElement)("h3",{className:"text-sm font-medium text-gray-500"},e),(0,a.createElement)("p",{className:"mt-1 text-3xl font-semibold text-gray-900"},t)),g=()=>{const{api:e}=m(),[t,n]=(0,a.useState)(null),[l,r]=(0,a.useState)(!0),[s,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{r(!0);const t=await e.get("stats/totals");n(t),o(null)}catch(e){o(e.message)}finally{r(!1)}})()},[e]),l?(0,a.createElement)("div",null,"Memuat statistik..."):s?(0,a.createElement)("div",{className:"text-red-500"},"Error: ",s):(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},(0,a.createElement)(p,{title:"Total Jemaah",value:t?.total_jamaah||0}),(0,a.createElement)(p,{title:"Total Paket",value:t?.total_packages||0}),(0,a.createElement)(p,{title:"Total Pemasukan",value:`Rp ${Number(t?.total_revenue||0).toLocaleString("id-ID")}`}),(0,a.createElement)(p,{title:"Total Pengeluaran",value:`Rp ${Number(t?.total_expense||0).toLocaleString("id-ID")}`}))},x=()=>{const{api:e}=m(),[t,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[s,o]=(0,a.useState)(null),[u,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[h,y]=(0,a.useState)(null),[E,b]=(0,a.useState)({package_name:"",price:"",departure_date:"",duration:"",status:"draft"}),f=(0,a.useCallback)(async()=>{try{r(!0);const t=await e.get("packages");n(t),o(null)}catch(e){o(e.message)}finally{r(!1)}},[e]);(0,a.useEffect)(()=>{f()},[f]);const w=(e=null)=>{e?(x(!0),y(e),b({package_name:e.package_name,price:e.price,departure_date:e.departure_date.split("T")[0],duration:e.duration,status:e.status})):(x(!1),y(null),b({package_name:"",price:"",departure_date:"",duration:"",status:"draft"})),p(!0)},v=()=>{p(!1),y(null),x(!1)},N=e=>{const{name:t,value:a}=e.target;b(e=>({...e,[t]:a}))};return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-4"},(0,a.createElement)("h2",{className:"text-2xl font-bold"},"Manajemen Paket Umroh"),(0,a.createElement)("button",{onClick:()=>w(),className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"+ Tambah Paket")),s&&(0,a.createElement)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4"},s),l?(0,a.createElement)("div",null,"Memuat data paket..."):(0,a.createElement)("div",{className:"bg-white shadow rounded-lg overflow-hidden"},(0,a.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,a.createElement)("thead",{className:"bg-gray-50"},(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama Paket"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Harga"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Keberangkatan"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),(0,a.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,a.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===t.length&&(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data.")),t.map(t=>(0,a.createElement)("tr",{key:t.id},(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},t.package_name),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"Rp ",Number(t.price).toLocaleString("id-ID")),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},new Date(t.departure_date).toLocaleDateString("id-ID")),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t.status),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},(0,a.createElement)("button",{onClick:()=>w(t),className:"text-indigo-600 hover:text-indigo-900"},"Edit"),(0,a.createElement)("button",{onClick:()=>(async t=>{if(window.confirm("Apakah Anda yakin ingin menghapus paket ini?"))try{await e.del(`packages/${t}`),f()}catch(e){o(`Gagal menghapus: ${e.message}`)}})(t.id),className:"text-red-600 hover:text-red-900"},"Hapus"))))))),(0,a.createElement)(i,{show:u,onClose:v,title:g?"Edit Paket":"Tambah Paket Baru"},(0,a.createElement)("form",{onSubmit:async t=>{t.preventDefault();try{g?await e.put(`packages/${h.id}`,E):await e.post("packages",E),f(),v()}catch(e){o(`Gagal menyimpan: ${e.message}`)}},className:"space-y-4"},(0,a.createElement)(c,{label:"Nama Paket",name:"package_name",value:E.package_name,onChange:N,required:!0}),(0,a.createElement)(c,{label:"Harga",name:"price",type:"number",value:E.price,onChange:N,required:!0}),(0,a.createElement)(c,{label:"Tanggal Keberangkatan",name:"departure_date",type:"date",value:E.departure_date,onChange:N,required:!0}),(0,a.createElement)(c,{label:"Durasi (hari)",name:"duration",type:"number",value:E.duration,onChange:N,required:!0}),(0,a.createElement)(d,{label:"Status",name:"status",value:E.status,onChange:N},(0,a.createElement)("option",{value:"draft"},"Draft"),(0,a.createElement)("option",{value:"published"},"Published"),(0,a.createElement)("option",{value:"archived"},"Archived")),(0,a.createElement)("div",{className:"text-right pt-4"},(0,a.createElement)("button",{type:"button",onClick:v,className:"mr-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200"},"Batal"),(0,a.createElement)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"Simpan")))))},h=()=>{const{api:e}=m(),[t,n]=(0,a.useState)([]),[l,r]=(0,a.useState)([]),[s,o]=(0,a.useState)(!0),[u,p]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1),[h,y]=(0,a.useState)(!1),[E,b]=(0,a.useState)(null),f={full_name:"",id_number:"",phone:"",email:"",package_id:"",status:"pending",payment_status:"pending"},[w,v]=(0,a.useState)(f),N=(0,a.useCallback)(async()=>{try{o(!0);const[t,a]=await Promise.all([e.get("jamaah"),e.get("packages")]);n(t),r(a),p(null)}catch(e){p(e.message)}finally{o(!1)}},[e]);(0,a.useEffect)(()=>{N()},[N]);const k=(e=null)=>{e?(y(!0),b(e),v({full_name:e.full_name,id_number:e.id_number,phone:e.phone||"",email:e.email||"",package_id:e.package_id,status:e.status,payment_status:e.payment_status})):(y(!1),b(null),v(f)),x(!0)},_=()=>{x(!1),b(null),y(!1)},S=e=>{const{name:t,value:a}=e.target;v(e=>({...e,[t]:a}))};return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-4"},(0,a.createElement)("h2",{className:"text-2xl font-bold"},"Manajemen Jemaah"),(0,a.createElement)("button",{onClick:()=>k(),className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"+ Tambah Jemaah")),u&&(0,a.createElement)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4"},u),s?(0,a.createElement)("div",null,"Memuat data jemaah dan paket..."):(0,a.createElement)("div",{className:"bg-white shadow rounded-lg overflow-hidden"},(0,a.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,a.createElement)("thead",{className:"bg-gray-50"},(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Paket"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pembayaran"),(0,a.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,a.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===t.length&&(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data.")),t.map(t=>(0,a.createElement)("tr",{key:t.id},(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},t.full_name),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t.package_name||"N/A"),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t.status),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t.payment_status),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},(0,a.createElement)("button",{onClick:()=>k(t),className:"text-indigo-600 hover:text-indigo-900"},"Edit"),(0,a.createElement)("button",{onClick:()=>(async t=>{if(window.confirm("Apakah Anda yakin ingin menghapus jemaah ini?"))try{await e.del(`jamaah/${t}`),N()}catch(e){p(`Gagal menghapus: ${e.message}`)}})(t.id),className:"text-red-600 hover:text-red-900"},"Hapus"))))))),(0,a.createElement)(i,{show:g,onClose:_,title:h?"Edit Jemaah":"Tambah Jemaah Baru"},(0,a.createElement)("form",{onSubmit:async t=>{t.preventDefault();try{h?await e.put(`jamaah/${E.id}`,w):await e.post("jamaah",w),N(),_()}catch(e){p(`Gagal menyimpan: ${e.message}`)}},className:"space-y-4"},(0,a.createElement)(c,{label:"Nama Lengkap",name:"full_name",value:w.full_name,onChange:S,required:!0}),(0,a.createElement)(c,{label:"No. KTP",name:"id_number",value:w.id_number,onChange:S,required:!0}),(0,a.createElement)(c,{label:"No. Telepon",name:"phone",value:w.phone,onChange:S}),(0,a.createElement)(c,{label:"Email",name:"email",type:"email",value:w.email,onChange:S}),(0,a.createElement)(d,{label:"Paket",name:"package_id",value:w.package_id,onChange:S,required:!0},(0,a.createElement)("option",{value:""},"Pilih Paket"),l.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.package_name))),(0,a.createElement)(d,{label:"Status Pendaftaran",name:"status",value:w.status,onChange:S},(0,a.createElement)("option",{value:"pending"},"Pending"),(0,a.createElement)("option",{value:"approved"},"Approved"),(0,a.createElement)("option",{value:"rejected"},"Rejected"),(0,a.createElement)("option",{value:"waitlist"},"Waitlist")),(0,a.createElement)(d,{label:"Status Pembayaran",name:"payment_status",value:w.payment_status,onChange:S},(0,a.createElement)("option",{value:"pending"},"Pending"),(0,a.createElement)("option",{value:"paid"},"Paid"),(0,a.createElement)("option",{value:"refunded"},"Refunded")),(0,a.createElement)("div",{className:"text-right pt-4"},(0,a.createElement)("button",{type:"button",onClick:_,className:"mr-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200"},"Batal"),(0,a.createElement)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"Simpan")))))},y=()=>{const{api:e}=m(),[t,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[s,o]=(0,a.useState)(null),[p,g]=(0,a.useState)(!1),x={transaction_type:"expense",description:"",amount:"",transaction_date:(new Date).toISOString().split("T")[0]},[h,y]=(0,a.useState)(x),E=(0,a.useCallback)(async()=>{try{r(!0);const t=await e.get("finance");n(t),o(null)}catch(e){o(e.message)}finally{r(!1)}},[e]);(0,a.useEffect)(()=>{E()},[E]);const b=()=>g(!1),f=e=>{const{name:t,value:a}=e.target;y(e=>({...e,[t]:a}))};return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-4"},(0,a.createElement)("h2",{className:"text-2xl font-bold"},"Manajemen Keuangan"),(0,a.createElement)("button",{onClick:()=>{y(x),g(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"+ Catat Transaksi")),s&&(0,a.createElement)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4"},s),l?(0,a.createElement)("div",null,"Memuat data keuangan..."):(0,a.createElement)("div",{className:"bg-white shadow rounded-lg overflow-hidden"},(0,a.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,a.createElement)("thead",{className:"bg-gray-50"},(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tanggal"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Deskripsi"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tipe"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Jumlah"),(0,a.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,a.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===t.length&&(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data.")),t.map(t=>(0,a.createElement)("tr",{key:t.id},(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},new Date(t.transaction_date).toLocaleDateString("id-ID")),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},t.description),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},(0,a.createElement)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("income"===t.transaction_type?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},t.transaction_type)),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},"Rp ",Number(t.amount).toLocaleString("id-ID")),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},(0,a.createElement)("button",{onClick:()=>(async t=>{if(window.confirm("Apakah Anda yakin ingin menghapus transaksi ini?"))try{await e.del(`finance/${t}`),E()}catch(e){o(`Gagal menghapus: ${e.message}`)}})(t.id),className:"text-red-600 hover:text-red-900"},"Hapus"))))))),(0,a.createElement)(i,{show:p,onClose:b,title:"Catat Transaksi Baru"},(0,a.createElement)("form",{onSubmit:async t=>{t.preventDefault();try{await e.post("finance",h),E(),b()}catch(e){o(`Gagal menyimpan: ${e.message}`)}},className:"space-y-4"},(0,a.createElement)(d,{label:"Tipe Transaksi",name:"transaction_type",value:h.transaction_type,onChange:f},(0,a.createElement)("option",{value:"expense"},"Pengeluaran (Expense)"),(0,a.createElement)("option",{value:"income"},"Pemasukan (Income)")),(0,a.createElement)(c,{label:"Tanggal",name:"transaction_date",type:"date",value:h.transaction_date,onChange:f,required:!0}),(0,a.createElement)(c,{label:"Jumlah (Rp)",name:"amount",type:"number",value:h.amount,onChange:f,required:!0}),(0,a.createElement)(u,{label:"Deskripsi",name:"description",value:h.description,onChange:f}),(0,a.createElement)("div",{className:"text-right pt-4"},(0,a.createElement)("button",{type:"button",onClick:b,className:"mr-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200"},"Batal"),(0,a.createElement)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"Simpan")))))},E=()=>{const{api:e}=m(),[t,n]=(0,a.useState)([]),[l,r]=(0,a.useState)([]),[s,o]=(0,a.useState)(!0),[p,g]=(0,a.useState)(null),[x,h]=(0,a.useState)(!1),y={title:"",description:"",assigned_to_user_id:"",due_date:"",priority:"medium",status:"pending"},[E,b]=(0,a.useState)(y),f=(0,a.useCallback)(async()=>{try{o(!0);const[t,a]=await Promise.all([e.get("tasks"),e.get("users")]);n(t),r(a),g(null)}catch(e){g(e.message)}finally{o(!1)}},[e]);(0,a.useEffect)(()=>{f()},[f]);const w=()=>h(!1),v=e=>{const{name:t,value:a}=e.target;b(e=>({...e,[t]:a}))};return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-4"},(0,a.createElement)("h2",{className:"text-2xl font-bold"},"Manajemen Tugas"),(0,a.createElement)("button",{onClick:()=>{b(y),h(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"+ Tambah Tugas")),p&&(0,a.createElement)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4"},p),s?(0,a.createElement)("div",null,"Memuat data tugas..."):(0,a.createElement)("div",{className:"bg-white shadow rounded-lg overflow-hidden"},(0,a.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,a.createElement)("thead",{className:"bg-gray-50"},(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tugas"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Ditugaskan Kepada"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Prioritas"),(0,a.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,a.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===t.length&&(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data.")),t.map(t=>{return(0,a.createElement)("tr",{key:t.id},(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},t.title),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},(n=t.assigned_to_user_id,l.find(e=>e.id===n)?.full_name||"N/A")),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t.status),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t.priority),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},(0,a.createElement)("button",{onClick:()=>(async t=>{if(window.confirm("Apakah Anda yakin ingin menghapus tugas ini?"))try{await e.del(`tasks/${t}`),f()}catch(e){g(`Gagal menghapus: ${e.message}`)}})(t.id),className:"text-red-600 hover:text-red-900"},"Hapus")));var n})))),(0,a.createElement)(i,{show:x,onClose:w,title:"Tugas Baru"},(0,a.createElement)("form",{onSubmit:async t=>{t.preventDefault();try{await e.post("tasks",E),f(),w()}catch(e){g(`Gagal menyimpan: ${e.message}`)}},className:"space-y-4"},(0,a.createElement)(c,{label:"Judul Tugas",name:"title",value:E.title,onChange:v,required:!0}),(0,a.createElement)(d,{label:"Tugaskan Kepada",name:"assigned_to_user_id",value:E.assigned_to_user_id,onChange:v},(0,a.createElement)("option",{value:""},"Pilih Karyawan"),l.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.full_name))),(0,a.createElement)(c,{label:"Batas Waktu",name:"due_date",type:"date",value:E.due_date,onChange:v}),(0,a.createElement)(d,{label:"Prioritas",name:"priority",value:E.priority,onChange:v},(0,a.createElement)("option",{value:"low"},"Low"),(0,a.createElement)("option",{value:"medium"},"Medium"),(0,a.createElement)("option",{value:"high"},"High")),(0,a.createElement)(u,{label:"Deskripsi",name:"description",value:E.description,onChange:v}),(0,a.createElement)("div",{className:"text-right pt-4"},(0,a.createElement)("button",{type:"button",onClick:w,className:"mr-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200"},"Batal"),(0,a.createElement)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"Simpan")))))},b=()=>{const{api:e}=m(),[t,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[s,o]=(0,a.useState)(null),[u,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[h,y]=(0,a.useState)(null),E={full_name:"",email:"",password:"",role:"karyawan",phone:""},[b,f]=(0,a.useState)(E),w=(0,a.useCallback)(async()=>{try{r(!0);const t=await e.get("users");n(t),o(null)}catch(e){o(e.message)}finally{r(!1)}},[e]);(0,a.useEffect)(()=>{w()},[w]);const v=(e=null)=>{e?(x(!0),y(e),f({full_name:e.full_name,email:e.email,password:"",role:e.role,phone:e.phone||""})):(x(!1),y(null),f(E)),p(!0)},N=()=>{p(!1),y(null),x(!1)},k=e=>{const{name:t,value:a}=e.target;f(e=>({...e,[t]:a}))};return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex justify-between items-center mb-4"},(0,a.createElement)("h2",{className:"text-2xl font-bold"},"Manajemen User (Karyawan/Owner)"),(0,a.createElement)("button",{onClick:()=>v(),className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"+ Tambah User")),s&&(0,a.createElement)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4"},s),l?(0,a.createElement)("div",null,"Memuat data user..."):(0,a.createElement)("div",{className:"bg-white shadow rounded-lg overflow-hidden"},(0,a.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,a.createElement)("thead",{className:"bg-gray-50"},(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),(0,a.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Role"),(0,a.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,a.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===t.length&&(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data.")),t.map(t=>(0,a.createElement)("tr",{key:t.id},(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},t.full_name),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t.email),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},t.role),(0,a.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},(0,a.createElement)("button",{onClick:()=>v(t),className:"text-indigo-600 hover:text-indigo-900"},"Edit"),(0,a.createElement)("button",{onClick:()=>(async t=>{if(window.confirm("Apakah Anda yakin ingin menghapus user ini?"))try{await e.del(`users/${t}`),w()}catch(e){o(`Gagal menghapus: ${e.message}`)}})(t.id),className:"text-red-600 hover:text-red-900"},"Hapus"))))))),(0,a.createElement)(i,{show:u,onClose:N,title:g?"Edit User":"Tambah User Baru"},(0,a.createElement)("form",{onSubmit:async t=>{t.preventDefault();try{const t={...b};g&&!t.password&&delete t.password,g?await e.put(`users/${h.id}`,t):await e.post("users",t),w(),N()}catch(e){o(`Gagal menambah: ${e.message}`)}},className:"space-y-4"},(0,a.createElement)(c,{label:"Nama Lengkap",name:"full_name",value:b.full_name,onChange:k,required:!0}),(0,a.createElement)(c,{label:"Email",name:"email",type:"email",value:b.email,onChange:k,required:!0}),(0,a.createElement)(c,{label:"No. Telepon",name:"phone",value:b.phone,onChange:k}),(0,a.createElement)(c,{label:g?"Password (Kosongkan jika tidak berubah)":"Password",name:"password",type:"password",value:b.password,onChange:k,required:!g}),(0,a.createElement)(d,{label:"Role",name:"role",value:b.role,onChange:k,required:!0},(0,a.createElement)("option",{value:"karyawan"},"Karyawan"),(0,a.createElement)("option",{value:"owner"},"Owner"),(0,a.createElement)("option",{value:"admin_staff"},"Admin Staff"),(0,a.createElement)("option",{value:"finance_staff"},"Finance Staff"),(0,a.createElement)("option",{value:"hr_staff"},"HR Staff"),(0,a.createElement)("option",{value:"sopir"},"Sopir")),(0,a.createElement)("div",{className:"text-right pt-4"},(0,a.createElement)("button",{type:"button",onClick:N,className:"mr-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200"},"Batal"),(0,a.createElement)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md shadow hover:bg-blue-700"},"Simpan")))))},f=({currentPage:e,setPage:t})=>{const{user:n,logout:l}=m(),r=({page:n,label:l})=>(0,a.createElement)("button",{onClick:()=>t(n),className:"px-3 py-2 rounded-md text-sm font-medium "+(e===n?"bg-gray-900 text-white":"text-gray-700 hover:bg-gray-700 hover:text-white")},l);return(0,a.createElement)("header",{className:"bg-white shadow mb-6"},(0,a.createElement)("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8"},(0,a.createElement)("div",{className:"flex justify-between items-center h-16"},(0,a.createElement)("div",{className:"flex items-center"},(0,a.createElement)("span",{className:"font-bold text-xl text-gray-800"},"Umroh Manager"),(0,a.createElement)("div",{className:"hidden md:flex flex-wrap items-center ml-10 space-x-4"},(0,a.createElement)(r,{page:"dashboard",label:"Dashboard"}),(0,a.createElement)(r,{page:"paket",label:"Paket"}),(0,a.createElement)(r,{page:"jemaah",label:"Jemaah"}),(0,a.createElement)(r,{page:"keuangan",label:"Keuangan"}),(0,a.createElement)(r,{page:"tugas",label:"Tugas"}),(0,a.createElement)(r,{page:"users",label:"Users"}))),(0,a.createElement)("div",{className:"flex items-center"},(0,a.createElement)("span",{className:"text-sm text-gray-600 mr-4"},"Halo, ",(0,a.createElement)("strong",null,n?.full_name||n?.email)," (",n?.role,")"),(0,a.createElement)("button",{onClick:l,className:"text-sm text-gray-700 hover:text-gray-900"},"Logout")))))},w=()=>{const{user:e,isLoading:t,login:n}=m(),[l,r]=(0,a.useState)("dashboard");return t?(0,a.createElement)("div",{style:N.loading},"Memuat Autentikasi..."):e?(0,a.createElement)("div",{className:"bg-gray-100 min-h-screen"},(0,a.createElement)(f,{currentPage:l,setPage:r}),(0,a.createElement)("main",{className:"max-w-full mx-auto p-6"},(()=>{switch(l){case"dashboard":default:return(0,a.createElement)(g,null);case"paket":return(0,a.createElement)(x,null);case"jemaah":return(0,a.createElement)(h,null);case"keuangan":return(0,a.createElement)(y,null);case"tugas":return(0,a.createElement)(E,null);case"users":return(0,a.createElement)(b,null)}})())):(0,a.createElement)(o,{onLoginSuccess:n})},v=document.getElementById("umh-react-app-root");if(v){if(!document.getElementById("tailwind-css")){const e=document.createElement("script");e.id="tailwind-css",e.src="https://cdn.tailwindcss.com",document.head.appendChild(e)}(0,n.H)(v).render((0,a.createElement)(s,null,(0,a.createElement)(w,null)))}const N={loginContainer:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80vh",backgroundColor:"#f9f9f9"},loginBox:{padding:"40px",backgroundColor:"#ffffff",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",width:"100%",maxWidth:"400px",textAlign:"center"},loginTitle:{fontSize:"24px",fontWeight:"600",margin:"0 0 10px"},loginSubtitle:{fontSize:"14px",color:"#666",marginBottom:"30px"},inputGroup:{marginBottom:"20px",textAlign:"left"},label:{display:"block",marginBottom:"5px",fontSize:"13px",fontWeight:"500",color:"#333"},input:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"},button:{width:"100%",padding:"12px",fontSize:"15px",fontWeight:"600",color:"#fff",backgroundColor:"#007cba",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.2s"},error:{color:"#d93030",fontSize:"13px",marginBottom:"15px"},loading:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80vh",fontSize:"18px",fontWeight:"500"}}})();